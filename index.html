<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="æ›²è‚±è€Œæ•">
<meta property="og:type" content="website">
<meta property="og:title" content="Lucia">
<meta property="og:url" content="http://lupeipei.github.io/index.html">
<meta property="og:site_name" content="Lucia">
<meta property="og:description" content="æ›²è‚±è€Œæ•">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Lucia">
<meta name="twitter:description" content="æ›²è‚±è€Œæ•">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://lupeipei.github.io/"/>





  <title> Lucia </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Lucia</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://lupeipei.github.io/2018/03/08/rendering-layout-for-special-action/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lucia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/03/08/rendering-layout-for-special-action/" itemprop="url">
                  Railsä¸­å¦‚ä½•ç»™actionçš„renderè®¾ç½®ç‰¹å®šçš„layoutï¼Ÿ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-03-08T08:00:15+08:00">
                2018-03-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ROR/" itemprop="url" rel="index">
                    <span itemprop="name">ROR</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/03/08/rendering-layout-for-special-action/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/03/08/rendering-layout-for-special-action/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œcontroller ä¸­actionçš„layoutéƒ½æ˜¯â€™application.html.erbâ€™ï¼Œä¹Ÿå¯ä»¥ç»Ÿä¸€æ›´æ¢ï¼Œåœ¨controllerä¸­ï¼Œæ·»åŠ ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">layout <span class="string">'my_layout'</span></div></pre></td></tr></table></figure>
<p>ç°åœ¨å‡å®šï¼Œé’ˆå¯¹action newï¼Œéœ€è¦ä½¿ç”¨layoutï¼šmy_layoutï¼Œ å…¶ä»–çš„actionséƒ½é‡‡ç”¨application, å¦‚ä½•å®ç°ï¼Ÿ</p>
<h4 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4><p>æˆ‘æ›¾ä¸€å¢æƒ…æ„¿åœ°ä»¥ä¸ºåº”è¯¥å¯ä»¥è¿™æ ·ï¼Œ åœ¨controllerä¸­æ·»åŠ å¦‚ä¸‹è¯­å¥ğŸ‘‡ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">layout <span class="string">'my_layout'</span>, <span class="symbol">:only</span> =&gt; <span class="symbol">:new</span></div></pre></td></tr></table></figure>
<p>æ˜¾ç„¶ï¼Œä¸€å¢æƒ…æ„¿çš„ç»“æœå¸¸å¸¸éƒ½é¢ä¸´ç€æ‚²å‰§ã€‚</p>
<p>æ­£ç¡®çš„è„±å‘æ–¹å¼æ˜¯è¿™æ ·çš„ğŸ‘‡ï¼š</p>
<p>åœ¨controllerä¸­å®šä¹‰ä¸€ä¸ªprivate methodï¼Œ ç„¶ååœ¨è¯¥methodä¸­è¿›è¡Œè®¾ç½®ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">layout <span class="symbol">:my_layout</span></div><div class="line">.....</div><div class="line"></div><div class="line"> private</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_layout</span></span></div><div class="line">	params[<span class="symbol">:action</span>] == <span class="string">'new'</span> ? <span class="string">'my_layout'</span> : <span class="string">'application'</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>å¦‚æœæ˜¯æŒ‡å®šçš„å¤šä¸ªactionéƒ½æ˜¯my_layoutå‘¢ï¼Ÿ</p>
<p>è¿™ä¹ˆè®¾ç½®ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">layout <span class="symbol">:my_layout</span></div><div class="line">.....</div><div class="line"></div><div class="line"> private</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_layout</span></span></div><div class="line">	<span class="string">%w[action1 action2 action3â€¦â€¦]</span>.<span class="keyword">include</span>?params[<span class="symbol">:action</span>] ? <span class="string">'my_layout'</span> : <span class="string">'application'</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>Okã€‚</p>
<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="https://stackoverflow.com/questions/9903261/rendering-layout-for-specific-actions" target="_blank" rel="external">Rendering Layout for specific actions</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://lupeipei.github.io/2018/03/06/using-layer-photos-in-rails/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lucia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/03/06/using-layer-photos-in-rails/" itemprop="url">
                  Railsä¸­ä½¿ç”¨layer.photosæ¥é¢„è§ˆå›¾ç‰‡
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-03-06T09:00:28+08:00">
                2018-03-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ROR/" itemprop="url" rel="index">
                    <span itemprop="name">ROR</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/03/06/using-layer-photos-in-rails/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/03/06/using-layer-photos-in-rails/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h4><p>ä¹‹å‰å†™äº†ç¯‡å­¦ä¹ ç¬”è®°<a href="http://luciaca.cn/2018/02/24/using-layer-on-Rails/" target="_blank" rel="external">Railsä¸­ä½¿ç”¨layerå¼¹çª—ç»„ä»¶</a>ï¼Œ è¿™ç¯‡å†™å†™å¦‚ä½•åœ¨Railsä¸­ä½¿ç”¨layerçš„photosæ¥å®ä½œå›¾ç‰‡é¢„è§ˆã€‚</p>
<h4 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h4><p>åœ¨å…¶æ–‡æ¡£çš„<a href="http://www.layui.com/doc/modules/layer.html#layer.photos" target="_blank" rel="external">layer.photos</a>ä¸­ï¼Œæœ‰ç”¨æ³•çš„è¯¦ç»†è¯´æ˜ã€‚ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li>ç›´æ¥è¯»å–é¡µé¢å›¾ç‰‡</li>
<li>ä¼ å…¥json</li>
</ul>
<p>æ¥çœ‹ä¸€ä¸‹æ¯ç§æ–¹å¼çš„å…·ä½“ä½¿ç”¨ã€‚</p>
<h5 id="ç›´æ¥è¯»å–é¡µé¢å›¾ç‰‡ï¼š"><a href="#ç›´æ¥è¯»å–é¡µé¢å›¾ç‰‡ï¼š" class="headerlink" title="ç›´æ¥è¯»å–é¡µé¢å›¾ç‰‡ï¼š"></a>ç›´æ¥è¯»å–é¡µé¢å›¾ç‰‡ï¼š</h5><p>å®˜æ–¹ç»™åˆ°çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">//HTMLç¤ºä¾‹</div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"layer-photos-demo"</span> <span class="attr">class</span>=<span class="string">"layer-photos-demo"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">layer-pid</span>=<span class="string">"å›¾ç‰‡idï¼Œå¯ä»¥ä¸å†™"</span> <span class="attr">layer-src</span>=<span class="string">"å¤§å›¾åœ°å€"</span> <span class="attr">src</span>=<span class="string">"ç¼©ç•¥å›¾"</span> <span class="attr">alt</span>=<span class="string">"å›¾ç‰‡å"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">layer-pid</span>=<span class="string">"å›¾ç‰‡idï¼Œå¯ä»¥ä¸å†™"</span> <span class="attr">layer-src</span>=<span class="string">"å¤§å›¾åœ°å€"</span> <span class="attr">src</span>=<span class="string">"ç¼©ç•¥å›¾"</span> <span class="attr">alt</span>=<span class="string">"å›¾ç‰‡å"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="comment">//è°ƒç”¨ç¤ºä¾‹</span></div><div class="line">layer.photos(&#123;</div><div class="line">  <span class="attr">photos</span>: <span class="string">'#layer-photos-demo'</span></div><div class="line">  ,<span class="attr">anim</span>: <span class="number">5</span> <span class="comment">//0-6çš„é€‰æ‹©ï¼ŒæŒ‡å®šå¼¹å‡ºå›¾ç‰‡åŠ¨ç”»ç±»å‹ï¼Œé»˜è®¤éšæœºï¼ˆè¯·æ³¨æ„ï¼Œ3.0ä¹‹å‰çš„ç‰ˆæœ¬ç”¨shiftå‚æ•°ï¼‰</span></div><div class="line">&#125;);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è¿™é‡Œè¦è¯´ä¸€ä¸‹ï¼Œå¦‚æœä¸€ä¸ªé¡µé¢é‡Œé¢ï¼Œä½ éœ€è¦å¤šä¸ªå¼¹çª—æ—¶ï¼Œå¦‚ä½•å¤„ç†ï¼Ÿ</p>
<p>å‡å®šç°åœ¨æœ‰ä¸€ç³»åˆ—äº§å“ï¼Œæ¯ä¸ªäº§å“å¯¹åº”æœ‰å¤šå¼ å›¾ç‰‡ã€‚ç±»ä¼¼è¿™æ ·ï¼š</p>
<p><img src="https://ws3.sinaimg.cn/large/006tNc79gy1fp1rwiwdzlj30js0azglk.jpg" alt=""></p>
<p>éœ€è¦çš„æ•ˆæœæ˜¯ï¼šè¿™æ—¶ï¼Œç‚¹å‡»product1çš„æŸå¼ å›¾ç‰‡ï¼Œå¼¹å‡ºçš„æ˜¯product1çš„å›¾ç‰‡é¢„è§ˆå±‚ï¼Œç‚¹å‡»product2ï¼Œå¼¹å‡ºçš„æ˜¯product2çš„å›¾ç‰‡é¢„è§ˆå±‚ã€‚</p>
<p>è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå¥—ä¸Šä¸€ä¸ªåŠ¨æ€çš„IDï¼Œéœ€è¦ç”¨ä¸ŠJSï¼Œç¤ºä¾‹çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">//HTMLç¤ºä¾‹</div><div class="line"><span class="tag">&lt;<span class="name">%</span> @<span class="attr">products.each</span> <span class="attr">do</span> |<span class="attr">product</span>| %&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"product-&lt;%= product.id %&gt;"</span> <span class="attr">class</span>=<span class="string">"layer-photos-demo"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">%</span> <span class="attr">product.images.each</span> <span class="attr">do</span> |<span class="attr">image</span> |%&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">img</span>  <span class="attr">onclick</span>= <span class="string">"getImage('&lt;%= product.id %&gt;');"</span> <span class="attr">layer-src</span>=<span class="string">"&lt;%= image.src %&gt;"</span> <span class="attr">src</span>=<span class="string">"&lt;%= image.thumb %&gt;"</span> <span class="attr">alt</span>=<span class="string">"å›¾ç‰‡å"</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">%</span> <span class="attr">end</span> %&gt;</span>   </div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">end</span> %&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getImage</span>(<span class="params">productId</span>)</span>&#123;</div><div class="line">        layer.photos(&#123;</div><div class="line">            <span class="attr">photos</span>: <span class="string">'#product-'</span> + productId,</div><div class="line">            <span class="attr">anim</span>:<span class="number">5</span></div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="JSONæ–‡ä»¶ä¼ å…¥"><a href="#JSONæ–‡ä»¶ä¼ å…¥" class="headerlink" title="JSONæ–‡ä»¶ä¼ å…¥"></a>JSONæ–‡ä»¶ä¼ å…¥</h5><p>å®˜æ–¹æ–‡æ¡£ç¤ºä¾‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$.getJSON(<span class="string">'/jquery/layer/test/photos.json'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">json</span>)</span>&#123;</div><div class="line">  layer.photos(&#123;</div><div class="line">    <span class="attr">photos</span>: json</div><div class="line">    ,<span class="attr">anim</span>: <span class="number">5</span> <span class="comment">//0-6çš„é€‰æ‹©ï¼ŒæŒ‡å®šå¼¹å‡ºå›¾ç‰‡åŠ¨ç”»ç±»å‹ï¼Œé»˜è®¤éšæœºï¼ˆè¯·æ³¨æ„ï¼Œ3.0ä¹‹å‰çš„ç‰ˆæœ¬ç”¨shiftå‚æ•°ï¼‰</span></div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>è¿”å›çš„JSONéœ€ä¸¥æ ¼æŒ‰ç…§å¦‚ä¸‹æ ¼å¼ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  "title": "", //ç›¸å†Œæ ‡é¢˜</div><div class="line">  "id": 123, //ç›¸å†Œid</div><div class="line">  "start": 0, //åˆå§‹æ˜¾ç¤ºçš„å›¾ç‰‡åºå·ï¼Œé»˜è®¤0</div><div class="line">  "data": [   //ç›¸å†ŒåŒ…å«çš„å›¾ç‰‡ï¼Œæ•°ç»„æ ¼å¼</div><div class="line">    &#123;</div><div class="line">      "alt": "å›¾ç‰‡å",</div><div class="line">      "pid": 666, //å›¾ç‰‡id</div><div class="line">      "src": "", //åŸå›¾åœ°å€</div><div class="line">      "thumb": "" //ç¼©ç•¥å›¾åœ°å€</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šæƒ³æ˜¯ä¸æ˜¯è¦ç”Ÿæˆä¸€ä¸ªJSONæ–‡ä»¶æ‰èƒ½ç”¨è¿™ç§æ–¹å¼? å…¶å®å¹¶ä¸éœ€è¦ã€‚åœ¨Railsä¸­å¯ä»¥ç”¨ä¸€ä¸ªactionçš„renderï¼ŒæŒ‡å®šè¿”å›JSONæ ¼å¼çš„æ•°æ®å³å¯ã€‚</p>
<p>è¿˜æ˜¯ä»¥productä¸ºä¾‹ï¼Œ ä¸‰æ­¥èµ°ï¼š</p>
<ul>
<li><p>ç»™å®ƒæ·»åŠ ä¸€ä¸ªpreviewçš„actionï¼Œ åœ¨routesä¸­å£°æ˜</p>
<p>åœ¨<code>routes.rb</code>ä¸­æ·»åŠ ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">resources <span class="symbol">:products</span> <span class="keyword">do</span></div><div class="line">  member <span class="keyword">do</span></div><div class="line">    get <span class="symbol">:preview</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"> <span class="keyword">end</span></div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨<code>products_controller.rb</code>ä¸­ï¼Œå®šä¹‰previewçš„å†…å®¹ï¼Œè¿”å›JSONå†…å®¹ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">preview</span></span></div><div class="line">  @product = Product.find(params[<span class="symbol">:id</span>])</div><div class="line">  @images = @product.images.all</div><div class="line">  @photo = &#123;</div><div class="line">      <span class="symbol">title:</span> @product.title,</div><div class="line">      <span class="symbol">id:</span> @product.id,</div><div class="line">      <span class="symbol">start:</span> <span class="number">0</span>,</div><div class="line">      <span class="symbol">data:</span> @images.map <span class="keyword">do</span> <span class="params">|image|</span></div><div class="line">        &#123;</div><div class="line">            <span class="symbol">alt:</span> image.title,</div><div class="line">            <span class="symbol">pid:</span> image.id,</div><div class="line">            <span class="symbol">src:</span> image.src,</div><div class="line">            <span class="symbol">thumb:</span> image.thumb</div><div class="line">        &#125;</div><div class="line">      <span class="keyword">end</span></div><div class="line">  &#125;</div><div class="line">  render <span class="symbol">json:</span> @photo</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>è¿”å›çš„JSONå†…å®¹ï¼Œæ ¼å¼éœ€è¦ä¸¥æ ¼æŒ‰ç…§æŒ‡å®šçš„æ ¼å¼å»å†™ã€‚</p>
</li>
<li><p>åœ¨å¯¹åº”çš„htmlä¸­ï¼Œæ¯”å¦‚productçš„indexé¡µé¢ï¼Œ æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">%</span> @<span class="attr">products.each</span> <span class="attr">do</span> |<span class="attr">product</span>| %&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"product-&lt;%= product.id %&gt;"</span> <span class="attr">class</span>=<span class="string">"layer-photos-demo"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:getImageJson('&lt;%= product.id %&gt;');"</span>&gt;</span></div><div class="line">      æŸ¥çœ‹äº§å“å›¾ç‰‡<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">end</span> %&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getImageJson</span>(<span class="params">productId</span>) </span>&#123;</div><div class="line">        $.getJSON(<span class="string">'/products/'</span> + productId + <span class="string">'/preview'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">json</span>)</span>&#123;</div><div class="line">            layer.photos(&#123;</div><div class="line">                <span class="attr">photos</span>: json,</div><div class="line">                <span class="attr">anim</span>: <span class="number">5</span></div><div class="line">            &#125;);</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>åˆ·æ–°é¡µé¢ç¡®è®¤æ˜¯å¦æ­£å¸¸ã€‚</p>
<p>OKï¼Œ å¤§åŠŸå‘Šæˆã€‚</p>
<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="http://www.layui.com/doc/modules/layer.html" target="_blank" rel="external">å¼¹å±‚ç»„ä»¶æ–‡æ¡£ - layui.layer</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://lupeipei.github.io/2018/03/04/upload-images-to-rails-API/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lucia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/03/04/upload-images-to-rails-API/" itemprop="url">
                  Railsä¸­å®ä½œå›¾ç‰‡ä¸Šä¼ API
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-03-04T10:26:09+08:00">
                2018-03-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ROR/" itemprop="url" rel="index">
                    <span itemprop="name">ROR</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/03/04/upload-images-to-rails-API/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/03/04/upload-images-to-rails-API/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h4><p>å¦‚æ ‡é¢˜æ‰€è¿°ï¼Œéœ€è¦é€šè¿‡æ¥å£å°†å›¾ç‰‡ä¸Šä¼ åˆ°RORé¡¹ç›®ä¸­ï¼Œå¦‚ä½•å®ç°ï¼Ÿ</p>
<h4 id="è§£ç­”"><a href="#è§£ç­”" class="headerlink" title="è§£ç­”"></a>è§£ç­”</h4><p>å…ˆè¯´ä¸€ä¸ªç®€å•çš„ã€‚</p>
<p>ä»¥ä¸€ä¸ªmodel pictureä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹å…·ä½“æ­¥éª¤ï¼š</p>
<p>model pictureçš„ä¿¡æ¯ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Table name pictures</div><div class="line"></div><div class="line">id          <span class="symbol">:integer</span></div><div class="line">file_name    <span class="symbol">:string</span></div><div class="line">image       <span class="symbol">:string</span></div></pre></td></tr></table></figure>
<p>è¿™é‡Œï¼Œè®¾ç½®routes, å»ºmodelï¼Œå»ºcontrollerçš„è¿‡ç¨‹çœç•¥ï¼Œå¯å‚è§ï¼š<a href="http://luciaca.cn/2017/12/31/web-api-practice/" target="_blank" rel="external">Railsï¼šWeb APIæ¥å£å®ä½œ</a>ã€‚</p>
<p>åˆ†ä¸‰æ­¥èµ°ï¼š</p>
<ul>
<li><p>è£…<a href="https://github.com/carrierwaveuploader/carrierwave" target="_blank" rel="external">carrierwave</a></p>
<p>ç¼–è¾‘ Gemfile</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">gem <span class="string">'carrierwave'</span></div><div class="line">gem <span class="string">'mini_magick'</span></div></pre></td></tr></table></figure>
<p>ç»ˆç«¯æ‰§è¡Œ<code>bundle</code>ï¼Œé‡å¯æœåŠ¡å™¨ã€‚</p>
</li>
<li><p>æ–°å¢uploader</p>
<p>æ‰§è¡Œï¼š<code>rails g uploader PicImage</code></p>
<p>ç¼–è¾‘<code>app/uploaders/pic_image_uploader.rb</code></p>
 <figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">PicImageUploader</span> &lt; CarrierWave::Uploader::<span class="title">Base</span></span></div><div class="line">  + <span class="keyword">include</span> CarrierWave::MiniMagick</div><div class="line">  ......  </div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>ç¼–è¾‘ <code>app/models/picture.rb</code>ï¼ŒæŠŠ carrierwave çš„ Uploader æŒ‚ä¸Šå»ã€‚</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Picture</span> &lt; ApplicationRecord</span></div><div class="line">  + mount_uploader <span class="symbol">:image</span>, PicImageUploader</div><div class="line">  ......</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
</li>
<li><p>è®¾å®šcreate</p>
<p>ç¼–è¾‘<code>app/controllers/api/v1/pictures_controller.rb</code> ä¸­ï¼Œcreateéƒ¨åˆ†ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># upload image through api</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Api::V1::PicturesController</span> &lt; ApiController</span></div><div class="line">  before_action <span class="symbol">:authenticate_user!</span>, <span class="symbol">only:</span> %i[create]</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">create</span></span></div><div class="line">    @picture = Picture.new(picture_params)  </div><div class="line">    <span class="keyword">if</span> @picture.save</div><div class="line">      render <span class="symbol">json:</span> &#123; <span class="symbol">file_name:</span> @picture.file_name, <span class="symbol">image:</span> @picture.image &#125;</div><div class="line">    <span class="keyword">else</span></div><div class="line">      render <span class="symbol">json:</span> &#123; <span class="symbol">message:</span> <span class="string">'failed'</span>, <span class="symbol">error:</span> @picture.errors &#125;, <span class="symbol">status:</span> <span class="number">400</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line">  .......</div><div class="line">  private</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">picture_params</span></span></div><div class="line">    params.permit(<span class="symbol">:file_name</span>, <span class="symbol">:image</span>)</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>å†æ¥ä¸ªå¤æ‚çš„ã€‚ğŸ‘‡</p>
<h4 id="å¦‚ä½•é€šè¿‡JSONæ–‡ä»¶æ¥ä¸Šä¼ ï¼Ÿ"><a href="#å¦‚ä½•é€šè¿‡JSONæ–‡ä»¶æ¥ä¸Šä¼ ï¼Ÿ" class="headerlink" title="å¦‚ä½•é€šè¿‡JSONæ–‡ä»¶æ¥ä¸Šä¼ ï¼Ÿ"></a>å¦‚ä½•é€šè¿‡JSONæ–‡ä»¶æ¥ä¸Šä¼ ï¼Ÿ</h4><p>åœ¨æœç´¢è§£ç­”çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°äº†å¦ä¸€ç§æ–¹å¼ï¼Œå‡å®šä½ éœ€è¦é€šè¿‡JSONæ–‡ä»¶çš„æ–¹å¼å»ä¸Šä¼ å›¾ç‰‡ï¼Œå¦‚ä½•å®ç°ï¼Ÿ<br>å³æ¥å£è°ƒç”¨æ˜¯è¿™æ ·çš„ï¼š<code>/api/v1/pictures.json</code>ï¼Œç”±äºJSONä¸æ”¯æŒåµŒå…¥å¼æ–‡ä»¶ï¼Œæ‰€ä»¥ä¼šæœ‰äº›æ³¢æŠ˜ã€‚</p>
<p>å…·ä½“çš„å®ç°æ–¹å¼æ˜¯å…ˆå°†éœ€è¦ä¸Šä¼ çš„å›¾ç‰‡fileç»base64ç¼–è¯‘åï¼Œè°ƒç”¨æ¥å£åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œ ç„¶ååœ¨picture controllerçš„createä¸­ï¼Œå¯¹ä¼ é€’è¿‡æ¥çš„å‚æ•°file_base64è¿›è¡Œè§£æï¼Œ å°†è§£æåçš„æ–‡ä»¶å†™å…¥temfileï¼Œå¹¶é€šè¿‡<code>ActionDispatch::Http::UploadedFile</code>æ¥æ–°å»ºä¸€ä¸ªuploader fileï¼Œå¦‚æ­¤ï¼Œä¸€ä¸ªimageä»encodingåˆ°decodingçš„è¿‡ç¨‹ç»“æŸï¼Œå†ä½¿ç”¨Picture.newåˆ›å»ºå³å¯ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œå‰é¢çš„æ­¥éª¤éƒ½ä¸€æ ·ï¼Œåªæ˜¯createéƒ¨åˆ†ä¼šæœ‰äº›ä¸åŒã€‚</p>
<p>å…ˆç»™pictureæ–°å¢ä¸€ä¸ªå­—æ®µï¼Œfile_base64, å®ƒæ˜¯å›¾ç‰‡ç»base64ç¼–è¯‘åå¾—åˆ°çš„å­—ç¬¦ä¸²ã€‚</p>
<p>æ‰§è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rails g migration add_file_base64_to_pictures file_base64:string</div><div class="line">rake db:migrate</div></pre></td></tr></table></figure>
<p>picture.jsonæ–‡ä»¶é•¿è¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">picture &#123;:file_base64 =&gt; &quot;file_base64&quot;, :file_name =&gt; &quot;file_name&quot;&#125;</div></pre></td></tr></table></figure>
<p>  ç¼–è¾‘<code>app/controllers/api/v1/pictures_controller.rb</code> ä¸­ï¼Œcreateéƒ¨åˆ†ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Api::V1::PicturesController</span> &lt; ApiController</span></div><div class="line">  before_action <span class="symbol">:authenticate_user!</span>, <span class="symbol">only:</span> %i[create]</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">create</span></span></div><div class="line">    <span class="keyword">if</span> params[<span class="symbol">:picture</span>][<span class="symbol">:file_base64</span>]</div><div class="line">      <span class="comment"># create a new tempfile named file</span></div><div class="line">      tempfile = Tempfile.new(<span class="string">'file'</span>)</div><div class="line">      tempfile.binmode</div><div class="line">      <span class="comment"># get the file ,decode it with base64, write it to the tempfile</span></div><div class="line">      tempfile.write(Base64.decode64(params[<span class="symbol">:picture</span>][<span class="symbol">:file_base64</span>]))</div><div class="line">      <span class="comment"># create a new uploaded file</span></div><div class="line">      @uploaded_file = ActionDispatch::Http::UploadedFile.new(<span class="symbol">tempfile:</span> tempfile, <span class="symbol">filename:</span> params[<span class="symbol">:picture</span>][<span class="symbol">:file_name</span>])</div><div class="line">      @picture = Picture.new(params[<span class="symbol">:picture</span>])</div><div class="line">      @picture.image = @uploaded_file</div><div class="line">      <span class="comment"># delete the tempfile</span></div><div class="line">      tempfile.delete</div><div class="line">    <span class="keyword">end</span></div><div class="line">    <span class="keyword">if</span> @picture.save</div><div class="line">      render <span class="symbol">json:</span> @picture</div><div class="line">    <span class="keyword">else</span></div><div class="line">      render <span class="symbol">json:</span> &#123; <span class="symbol">message:</span> <span class="string">'failed'</span>, <span class="symbol">error:</span> @picture.errors &#125;, <span class="symbol">status:</span> <span class="number">400</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p> è¿™é‡Œï¼Œcreateéƒ¨åˆ†æ˜¾å¾—å¾ˆè‡ƒè‚¿ï¼Œæˆ‘ä»¬skinnyä¸€ä¸‹ï¼Œæ”¹æˆè¿™æ ·ï¼š</p>
  <figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Api::V1::PicturesController</span> &lt; ApiController</span></div><div class="line">  before_action <span class="symbol">:authenticate_user!</span>, <span class="symbol">only:</span> %i[create]</div><div class="line">  before_action <span class="symbol">:process_file</span>, <span class="symbol">only:</span> %i[create]</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">create</span></span></div><div class="line">    <span class="keyword">if</span> @picture.save</div><div class="line">      render <span class="symbol">json:</span> @picture</div><div class="line">    <span class="keyword">else</span></div><div class="line">      render <span class="symbol">json:</span> &#123; <span class="symbol">message:</span> <span class="string">'failed'</span>, <span class="symbol">error:</span> @picture.errors &#125;, <span class="symbol">status:</span> <span class="number">400</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  private</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">process_file</span></span></div><div class="line">    <span class="keyword">if</span> params[<span class="symbol">:picture</span>][<span class="symbol">:file_base64</span>]</div><div class="line">      tempfile = Tempfile.new(<span class="string">'file'</span>)</div><div class="line">      tempfile.binmode</div><div class="line">      tempfile.write(Base64.decode64(params[<span class="symbol">:picture</span>][<span class="symbol">:file_base64</span>]))</div><div class="line">      @uploaded_file = ActionDispatch::Http::UploadedFile.new(<span class="symbol">tempfile:</span> tempfile, <span class="symbol">filename:</span> params[<span class="symbol">:picture</span>][<span class="symbol">:file_name</span>])</div><div class="line">      @picture = Picture.new(params[<span class="symbol">:picture</span>])</div><div class="line">      @picture.image = @uploaded_file</div><div class="line">      tempfile.delete</div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>  å‘ƒï¼Œè²Œä¼¼process_fileè¿˜æ˜¯æœ‰ç‚¹è‡ƒè‚¿ï¼Œ å¯ä»¥ç»§ç»­æ‹†ï¼Œè¿™é‡Œå°±ä¸å®ä½œäº†ã€‚</p>
<p>  OK. ç”¨postmanæµ‹è¯•ä¸€ä¸‹ï¼Œç¡®è®¤æ­£å¸¸ã€‚</p>
<p>  è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šé—®ï¼Œç¼–è¯‘åçš„æ–‡ä»¶åœ¨å“ªå‘¢ï¼Ÿåœ¨public/uploaders/picture/imageä¸‹ã€‚</p>
<p>æ­¤å¤–ï¼Œä¸Šä¼ çš„æ–‡ä»¶ä¸éœ€è¦ git commitï¼Œ åœ¨ <code>.gitignore</code> ä¸­æ·»åŠ  <code>public/uploads</code> è¿™ä¸ªç›®å½•å³å¯ã€‚</p>
<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="https://stackoverflow.com/questions/9758879/sending-files-to-a-rails-json-api" target="_blank" rel="external">Sending files to a Rails JSON API</a></p>
<p><a href="https://stackoverflow.com/questions/9854916/base64-upload-from-android-java-to-ror-carrierwave" target="_blank" rel="external">Base64 upload from Android/Java to RoR Carrierwave</a></p>
<p><a href="https://ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html" target="_blank" rel="external">Tempfile</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://lupeipei.github.io/2018/03/03/implement-Rails-API-filtering/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lucia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/03/03/implement-Rails-API-filtering/" itemprop="url">
                  ç”¨has_scopeå®ç°Rails APIç­›é€‰
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-03-03T11:16:45+08:00">
                2018-03-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ROR/" itemprop="url" rel="index">
                    <span itemprop="name">ROR</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/03/03/implement-Rails-API-filtering/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/03/03/implement-Rails-API-filtering/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h4><p>åšæ¥å£çš„æ—¶å€™ï¼Œé‡åˆ°äº†ç­›é€‰çš„é—®é¢˜ï¼Œä¸çŸ¥å¦‚ä½•å»å¤„ç†ï¼ŒGoogleäº†ä¸‹ï¼Œå‘ç°äº†ä¸ªå¾ˆç®€å•çš„è§£æ³•ï¼Œå®æµ‹æœ‰æ•ˆï¼Œé™„ä¸Šã€‚</p>
<h4 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h4><p>ç°æœ‰model productï¼Œcategory,  schemaä¸­ä¿¡æ¯å¦‚ä¸‹ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Table name products</div><div class="line"></div><div class="line">id          <span class="symbol">:integer</span></div><div class="line">title       <span class="symbol">:string</span></div><div class="line">description <span class="symbol">:string</span></div><div class="line">price       <span class="symbol">:float</span></div><div class="line">category_id <span class="symbol">:integer</span></div><div class="line"></div><div class="line">Table name  categories</div><div class="line">id          <span class="symbol">:integer</span></div><div class="line">title       <span class="symbol">:string</span></div></pre></td></tr></table></figure>
<p><code>app/models/product.rb</code>ä¸­ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span> &lt; ActiveRecord::Base</span></div><div class="line">  belongs_to <span class="symbol">:category</span></div><div class="line">  ......</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p><code>app/models/category.rb</code>ä¸­ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Category</span> &lt; ActiveRecord::Base</span></div><div class="line">  has_many <span class="symbol">:products</span></div><div class="line">  ......</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p><code>app/controllers/api/v1/products_controller.rb</code>ä¸­ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Api::V1::ExperiencesController</span> &lt; Api::V1::<span class="title">BaseController</span></span></div><div class="line"><span class="comment"># GET /api/v1/products</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">index</span></span></div><div class="line">    @products = Product.all</div><div class="line">    render <span class="symbol">json:</span> @products</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>ç°åœ¨éœ€è¦å¾—åˆ°æŒ‡å®šcategoryçš„productsï¼Œç±»ä¼¼è¿™æ ·ï¼š<code>/api/v1/products?category=1</code>ï¼Œå¾—åˆ°categoryæ˜¯1çš„æ‰€æœ‰productsã€‚ä»¥åŠç»™å®šä»·æ ¼åŒºé—´çš„productsï¼Œç±»ä¼¼è¿™æ ·ï¼š<code>/api/v1/products?price[from]=100&amp;price[to]=999</code></p>
<p>å¦‚ä½•å®ç°ï¼Ÿ</p>
<p>è¯•è¯•<a href="https://github.com/plataformatec/has_scope" target="_blank" rel="external">has_scope</a></p>
<h4 id="è§£ç­”"><a href="#è§£ç­”" class="headerlink" title="è§£ç­”"></a>è§£ç­”</h4><p>ä¸‰æ­¥èµ°</p>
<ul>
<li><p>å®‰è£…<a href="https://github.com/plataformatec/has_scope" target="_blank" rel="external">has_scope</a> gem</p>
<p>gemfileä¸­æ·»åŠ ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gem <span class="string">'has_scope'</span></div></pre></td></tr></table></figure>
<p>ç»ˆç«¯bundleï¼ŒæœåŠ¡å™¨é‡å¯ã€‚</p>
</li>
<li><p>åœ¨modelä¸­æ·»åŠ scope</p>
<p>ä¿®æ”¹<code>app/models/product.rb</code>ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Product</span> &lt; ActiveRecord::Base</span></div><div class="line">  belongs_to <span class="symbol">:category</span></div><div class="line"></div><div class="line"> + scope <span class="symbol">:category</span>, -&gt; (category_id) &#123; where(<span class="symbol">category_id:</span> category_id) &#125;</div><div class="line"> + scope <span class="symbol">:price</span>, -&gt; (from, to) &#123; where(<span class="string">"price &gt;= ? AND price &lt;= ?"</span>, from, to) &#125;</div><div class="line">  ......</div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨controllerä¸­æ·»åŠ has_scope</p>
<p>ä¿®æ”¹<code>app/controllers/api/v1/products_controller.rb</code>ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Api::V1::ExperiencesController</span> &lt; Api::V1::<span class="title">BaseController</span></span></div><div class="line">  + has_scope <span class="symbol">:category</span>, <span class="symbol">only:</span> <span class="symbol">:index</span></div><div class="line">  + has_scope <span class="symbol">:price</span>, <span class="symbol">using:</span> [<span class="symbol">:from</span>, <span class="symbol">:to</span>], <span class="symbol">only:</span> <span class="symbol">:index</span></div><div class="line"></div><div class="line"><span class="comment"># GET /api/v1/products</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">index</span></span></div><div class="line">  -  @products = Product.all</div><div class="line">  +  @products = apply_scopes(Product).includes(<span class="symbol">:category</span>).all</div><div class="line">      <span class="comment"># using includes(:category), fix N+1 query problem</span></div><div class="line">    render <span class="symbol">json:</span> @products</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>å¥½ï¼Œå¤§åŠŸå‘Šæˆï¼Œç”¨postmanæµ‹è¯•ä¸‹ï¼Œç¡®è®¤æ­£å¸¸ï¼Œcoolï¼</p>
</li>
</ul>
<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="https://gist.github.com/mamantoha/9c0aec7958c7636cebef" target="_blank" rel="external">Rails API Filtering and Sorting</a></p>
<p><a href="https://github.com/plataformatec/has_scope" target="_blank" rel="external">has_scope</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://lupeipei.github.io/2018/03/01/skinny-controller-with-jbuilder/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lucia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/03/01/skinny-controller-with-jbuilder/" itemprop="url">
                  Web APIä¸­ï¼Œä½¿ç”¨Jbuilderæ¥ç»™ä½ çš„controllerç˜¦ä¸ªèº«
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-03-01T07:46:05+08:00">
                2018-03-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ROR/" itemprop="url" rel="index">
                    <span itemprop="name">ROR</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/03/01/skinny-controller-with-jbuilder/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/03/01/skinny-controller-with-jbuilder/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h4><p>MVC æ¡†æ¶ä¸­çš„ä¸€ä¸ªè®¾è®¡åŸåˆ™ï¼šfat model, skinny controllerã€‚ä¸”ä¸è¯´è¿™åŸåˆ™æ˜¯ä¸æ˜¯ç»å¯¹çš„æ­£ç¡®ï¼Œä¸è¿‡é¢å¯¹è‡ƒè‚¿çš„controllerï¼ŒIDEä¹Ÿä¼šå‘å‡ºæé†’è¡¨ç¤ºæŠ—è®®ã€‚</p>
<p>æ¯”å¦‚åœ¨Web APIä¸­ï¼Œä¸€èˆ¬ç”¨getè·å–èµ„æ–™çš„æ—¶å€™ï¼Œè¿”å›çš„JSONä¸­ï¼Œå­—æ®µä¼šæ¯”è¾ƒå¤šï¼Œç›¸åº”åœ°ï¼Œä½ åœ¨controlleré‡Œé¢å†™çš„indexæˆ–è€…show ä¹Ÿç›¸å¯¹æœ‰äº›è‡ƒè‚¿ã€‚é‚£ä¹ˆå¦‚ä½•ç®€åŒ–ï¼Ÿ</p>
<p>è¯•è¯•<a href="https://github.com/rails/jbuilder" target="_blank" rel="external">Jbuilder</a>ã€‚</p>
<p>ä¸‹é¢ç”¨ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜ä¸‹æ€ä¹ˆç»™controllerç˜¦èº«ã€‚</p>
<h4 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h4><p>å‡å®šä½ å®Œæˆäº†ä¸€ä¸ªproductsçš„APIæ¥å£ï¼Œå¯¹åº”çš„<code>app/controllers/api/v1/products_controller.rb</code>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Api::V1::ProductsController</span> &lt; ApiController</span></div><div class="line">  before_action <span class="symbol">:authenticate_user!</span>, <span class="symbol">only:</span> %i[index show create update destroy]</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">index</span></span></div><div class="line">    @products = Product.all</div><div class="line">    render <span class="symbol">json:</span> &#123;</div><div class="line">        <span class="symbol">data:</span> @products.map <span class="keyword">do</span> <span class="params">|product|</span></div><div class="line">          &#123;</div><div class="line">              <span class="symbol">id:</span> product.id,</div><div class="line">              <span class="symbol">creator:</span> product.user.user_name,</div><div class="line">              <span class="symbol">name:</span> product.name,</div><div class="line">              <span class="symbol">description:</span> product.description,</div><div class="line">              <span class="symbol">price:</span> product.price</div><div class="line">          &#125;</div><div class="line">        <span class="keyword">end</span></div><div class="line">    &#125;</div><div class="line">  <span class="keyword">end</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">create</span></span></div><div class="line">    @product = Product.new(</div><div class="line">        <span class="symbol">name:</span> params[<span class="symbol">:name</span>],</div><div class="line">        <span class="symbol">description:</span> params[<span class="symbol">:description</span>],</div><div class="line">        <span class="symbol">price:</span> params[<span class="symbol">:price</span>]</div><div class="line">    )</div><div class="line">    @product.user = current_user</div><div class="line">    <span class="keyword">if</span> @product.save</div><div class="line">      render <span class="symbol">json:</span> @product</div><div class="line">    <span class="keyword">else</span></div><div class="line">      render <span class="symbol">json:</span> &#123; <span class="symbol">message:</span> <span class="string">'failed'</span>, <span class="symbol">errors:</span> @product.errors &#125;, <span class="symbol">status:</span> <span class="number">400</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">show</span></span></div><div class="line">    @product = Product.find(params[<span class="symbol">:id</span>])</div><div class="line">    render <span class="symbol">json:</span> &#123;</div><div class="line">        <span class="symbol">id:</span> product.id,</div><div class="line">        <span class="symbol">creator:</span> product.user.user_name,</div><div class="line">        <span class="symbol">name:</span> product.name,</div><div class="line">        <span class="symbol">description:</span> product.description,</div><div class="line">        <span class="symbol">price:</span> product.price</div><div class="line">    &#125;</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">update</span></span></div><div class="line">    @product = Product.find(params[<span class="symbol">:id</span>])</div><div class="line">    @product.update(<span class="symbol">name:</span> params[<span class="symbol">:name</span>], <span class="symbol">description:</span> params[<span class="symbol">:description</span>],<span class="symbol">price:</span> params[<span class="symbol">:price</span>])</div><div class="line">    render <span class="symbol">json:</span> &#123;</div><div class="line">        <span class="symbol">message:</span> <span class="string">'update product successfully'</span></div><div class="line">    &#125;</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">destroy</span></span></div><div class="line">    @product = Product.find(params[<span class="symbol">:id</span>])</div><div class="line">    @product.destroy</div><div class="line">    render <span class="symbol">json:</span> &#123;</div><div class="line">        <span class="symbol">message:</span> <span class="string">'product deleted'</span></div><div class="line">    &#125;</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>çœ‹ç€å¾ˆå†—é•¿å•Šï¼Œæ€ä¹ˆç˜¦ï¼Ÿ</p>
<p>åˆ†ä¸‰æ­¥èµ°ï¼š</p>
<ul>
<li>å¯¹index, showéƒ¨åˆ†ï¼Œç”¨Jbuilderï¼Œ</li>
<li>å¯¹createï¼Œupdateéƒ¨åˆ†ï¼Œç”¨ strong params</li>
<li>å¯¹show, update, destoryéƒ¨åˆ†å…±æœ‰çš„@productï¼ŒæŠ½å‡ºæ¥ï¼Œç”¨before_action</li>
</ul>
<p>ç¬¬ä¸€æ­¥ï¼šç®€åŒ–indexï¼Œshow</p>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°showå’Œindexä¸­é‡å¤ä»£ç è¾ƒå¤šï¼Œç”¨ä¸Špartial</p>
<ul>
<li><p>æ–°å»ºæ–‡ä»¶ï¼š<br><code>app/views/api/v1/products/_item.json.jbuilder</code>, <code>app/views/api/v1/products/show.json.jbuilder</code>,<br><code>app/views/api/v1/products/index.json.jbuilder</code>,</p>
</li>
<li><p>åœ¨<code>app/views/api/v1/products/_item.json.jbuilder</code>ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">json.id  product.id</div><div class="line">json.creator product.user.user_name</div><div class="line">json.name product.name</div><div class="line">json.description product.description</div><div class="line">json.price product.price</div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨<code>app/views/api/v1/products/show.json.jbuilder</code>ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">json.partial! &apos;item&apos;, product: @product</div></pre></td></tr></table></figure>
</li>
<li><p>åœ¨<code>app/views/api/v1/products/index.json.jbuilder</code>ï¼Œ æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">json.array! @products, partial: &apos;item&apos;, as: :product</div></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹<code>app/controllers/api/v1/products_controller.rb</code>çš„indexå’Œshowéƒ¨åˆ†, åˆ é™¤renderï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Api::V1::ProductsController</span> &lt; ApiController</span></div><div class="line">  before_action <span class="symbol">:authenticate_user!</span>, <span class="symbol">only:</span> %i[index show create update destroy]</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">index</span></span></div><div class="line">    @products = Product.all</div><div class="line">  <span class="keyword">end</span></div><div class="line"> .......</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">show</span></span></div><div class="line">    @product = Product.find(params[<span class="symbol">:id</span>])</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">.......</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>å¯ä»¥ç”¨postmanæµ‹è¯•ä¸€ä¸‹ï¼Œç¡®ä¿æ¥å£ä»æ­£å¸¸ã€‚</p>
</li>
</ul>
<p>ç¬¬äºŒæ­¥ï¼šç®€åŒ–createï¼Œupdateï¼Œ ç”¨params.require</p>
<ul>
<li><p>ä¿®æ”¹<code>app/controllers/api/v1/products_controller.rb</code>çš„createå’Œupdateéƒ¨åˆ†ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Api::V1::ProductsController</span> &lt; ApiController</span></div><div class="line">  before_action <span class="symbol">:authenticate_user!</span>, <span class="symbol">only:</span> %i[index show create update destroy]</div><div class="line">  .....</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">create</span></span></div><div class="line">    @product = Product.new(product_params)</div><div class="line">    @product.user = current_user</div><div class="line">    <span class="keyword">if</span> @product.save</div><div class="line">      render <span class="symbol">json:</span> @product</div><div class="line">    <span class="keyword">else</span></div><div class="line">      render <span class="symbol">json:</span> &#123; <span class="symbol">message:</span> <span class="string">'failed'</span>, <span class="symbol">errors:</span> @product.errors &#125;, <span class="symbol">status:</span> <span class="number">400</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"> .......</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">update</span></span></div><div class="line">    @product = Product.find(params[<span class="symbol">:id</span>])</div><div class="line">    @product.update(product_params)</div><div class="line">    render <span class="symbol">json:</span> &#123;</div><div class="line">        <span class="symbol">message:</span> <span class="string">'update product successfully'</span></div><div class="line">    &#125;</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">.......</div><div class="line">  private</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">product_params</span></span></div><div class="line">    params.permit(<span class="symbol">:name</span>, <span class="symbol">:description</span>, <span class="symbol">:price</span>)</div><div class="line">  <span class="keyword">end</span>         </div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œè¿™é‡Œ<strong>ä¸èƒ½ä½¿ç”¨params.requrie(:product).permit(:name, :description, :price)</strong>ï¼Œå› ä¸ºä½ æ˜¯è°ƒç”¨æ¥å£æ¥æ–°å»ºæˆ–è€…ä¿®æ”¹çš„ã€‚</p>
<p>å¯å‚è§è¿™ä¸ªï¼š<a href="https://stackoverflow.com/questions/38701746/when-json-data-posted-in-rails-throws-param-is-missing-or-the-value-is-empty-st" target="_blank" rel="external">When JSON data posted in rails throws param is missing or the value is empty: stall</a></p>
</li>
</ul>
<p>ç¬¬ä¸‰æ­¥ï¼šç®€åŒ–showï¼Œupdateï¼Œ destroy</p>
<ul>
<li><p>æŠŠshowï¼Œupdateï¼Œ destroyç›¸åŒçš„éƒ¨åˆ†ï¼š <code>@product = Product.find(params[:id])</code>æŠ½å‡ºæ¥ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Api::V1::ProductsController</span> &lt; ApiController</span></div><div class="line">  before_action <span class="symbol">:authenticate_user!</span>, <span class="symbol">only:</span> %i[index show create update destroy]</div><div class="line">  before_action <span class="symbol">:find_product</span>, <span class="symbol">only:</span> %i[show update destroy]</div><div class="line">.....</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">show</span>;</span> <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">update</span></span></div><div class="line">    @product.update(product_params)</div><div class="line">    render <span class="symbol">json:</span> &#123;</div><div class="line">        <span class="symbol">message:</span> <span class="string">'update product successfully'</span></div><div class="line">    &#125;</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">destroy</span></span></div><div class="line">    @product.destroy</div><div class="line">    render <span class="symbol">json:</span> &#123;</div><div class="line">        <span class="symbol">message:</span> <span class="string">'product deleted'</span></div><div class="line">    &#125;</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  private</div><div class="line">.......</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">find_product</span></span></div><div class="line">    @product = Product.find(params[<span class="symbol">:id</span>])</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p>æœ€åç˜¦èº«çš„controlleré•¿è¿™æ ·ï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Api::V1::ProductsController</span> &lt; ApiController</span></div><div class="line">  before_action <span class="symbol">:authenticate_user!</span>, <span class="symbol">only:</span> %i[index show create update destroy]</div><div class="line">  before_action <span class="symbol">:find_product</span>, <span class="symbol">only:</span> %i[show update destroy]</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">index</span></span></div><div class="line">    @products = Product.all</div><div class="line">  <span class="keyword">end</span></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">create</span></span></div><div class="line">    @product = Product.new(product_params)</div><div class="line">    @product.user = current_user</div><div class="line">    <span class="keyword">if</span> @product.save</div><div class="line">      render <span class="symbol">json:</span> @product</div><div class="line">    <span class="keyword">else</span></div><div class="line">      render <span class="symbol">json:</span> &#123; <span class="symbol">message:</span> <span class="string">'failed'</span>, <span class="symbol">errors:</span> @product.errors &#125;, <span class="symbol">status:</span> <span class="number">400</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">show</span>;</span> <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">update</span></span></div><div class="line">    @product.update(product_params)</div><div class="line">    render <span class="symbol">json:</span> &#123; <span class="symbol">message:</span> <span class="string">'update product successfully'</span>&#125;</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">destroy</span></span></div><div class="line">    @product.destroy</div><div class="line">    render <span class="symbol">json:</span> &#123; <span class="symbol">message:</span> <span class="string">'product deleted'</span>&#125;</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  private</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">product_params</span></span></div><div class="line">    param.permit(<span class="symbol">:name</span>, <span class="symbol">:description</span>, <span class="symbol">:price</span>)</div><div class="line">  <span class="keyword">end</span></div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">find_product</span></span></div><div class="line">    @product = Product.find(params[<span class="symbol">:id</span>])</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>æ˜¯ä¸æ˜¯æ¸…çˆ½äº†å¾ˆå¤šï¼Ÿçœ‹ç€èˆ’æœå¤šäº†ï¼Œå¤§åŠŸå‘Šæˆï¼</p>
<p>è¿™é‡Œå¤šä¸€å¥ï¼Œå¦‚æœä½ çš„æŸä¸ªmethodéƒ¨åˆ†ä»£ç è¾ƒå¤šï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ‹†åˆ†çš„æ–¹å¼ï¼Œ æ¯”å¦‚ä¸‹é¢è¿™ä¸ªshowï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span></span></div><div class="line">  @category = Category.find(params[<span class="symbol">:id</span>])</div><div class="line">  @categories = Category.all</div><div class="line">  @search = @category.products.approved.order(<span class="symbol">updated_at:</span> <span class="symbol">:desc</span>).ransack(params[<span class="symbol">:q</span>])</div><div class="line">  @products = @search.result.page(params[<span class="symbol">:page</span>]).per(<span class="number">50</span>)</div><div class="line">  rate</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>å¯ä»¥æ¢æˆï¼š</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">before_action <span class="symbol">:fetch_current_category</span>, <span class="symbol">only:</span> [<span class="symbol">:show</span>]</div><div class="line">before_action <span class="symbol">:fetch_categories</span>, <span class="symbol">only:</span> [<span class="symbol">:show</span>]</div><div class="line">before_action <span class="symbol">:fetch_search_results</span>, <span class="symbol">only:</span> [<span class="symbol">:show</span>]</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span></span></div><div class="line">  rate</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">private</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fetch_current_category</span></span></div><div class="line">  @category = Category.find(params[<span class="symbol">:id</span>])</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fetch_categories</span></span></div><div class="line">  @categories = Category.all</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fetch_search_results</span></span></div><div class="line">  @search = @category.products.approved.order(<span class="symbol">updated_at:</span> <span class="symbol">:desc</span>).ransack(params[<span class="symbol">:q</span>])</div><div class="line">  @products = @search.result.page(params[<span class="symbol">:page</span>]).per(<span class="number">50</span>)</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="https://stackoverflow.com/questions/30932732/what-is-meant-by-assignment-branch-condition-size-too-high-and-how-to-fix-it" target="_blank" rel="external">What is meant by â€˜Assignment Branch Condition Size too highâ€™ and how to fix it?</a></p>
<p>å¯¹äºâ€<strong>fat model, skinny controller</strong>â€œè¿™ä¸ªåŸåˆ™ï¼Œä¹Ÿæœ‰äººåå¯¹ï¼Œæå‡º<strong>â€œskinny everythingâ€</strong>ï¼Œ æˆ³é“¾æ¥äº†è§£ï¼š</p>
<p><a href="http://blog.joncairns.com/2013/04/fat-model-skinny-controller-is-a-load-of-rubbish/" target="_blank" rel="external">â€œFat model, skinny controllerâ€ is a load of rubbish</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://lupeipei.github.io/2018/02/27/how-to-call-javascript-through-href-or-onclick/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lucia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/02/27/how-to-call-javascript-through-href-or-onclick/" itemprop="url">
                  ä½¿ç”¨hrefæˆ–onclickæ¥è°ƒç”¨javascript
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-02-27T08:12:54+08:00">
                2018-02-27
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/02/27/how-to-call-javascript-through-href-or-onclick/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/02/27/how-to-call-javascript-through-href-or-onclick/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h4><p>ä»Šå¤©æ‰çŸ¥é“åŸæ¥javascriptæ˜¯å¯ä»¥é€šè¿‡href æˆ–è€…onclickæ¥è°ƒç”¨çš„ï¼Œè¿˜èƒ½ä¼ é€’å‚æ•°ï¼Œç”¨è¿‡åï¼Œåˆ æ‰ä¹‹å‰é‚£å †æ— ç”¨çš„Ajaxä»£ç å’Œæ–‡ä»¶ï¼Œç¬é—´è§‰å¾—è¿™ä¸ªæ–¹æ³•çœŸçš„å¥½coolï¼Œå¥½å¥½ç”¨å•Šï¼Œ å¥½æ¯”é‚£è·¯ç—´ç»•äº†ä¸€ä¸ªå¤§åœˆå­åˆ°è¾¾ç›®çš„åœ°åï¼Œå‘ç°åŸæ¥å·²æœ‰ä¸€æ¡è¸©å¥½çš„æ·å¾„ã€‚ã€è¯·æ— è§†å°ç™½çš„æ¿€åŠ¨ã€‘</p>
<p>è®°å½•ä¸‹ä½¿ç”¨href æˆ–è€…onclickæ¥è°ƒç”¨javascriptçš„ç”¨æ³•ï¼ŒåŠ æ·±ç†è§£ã€‚</p>
<h4 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h4><p>åˆ†æ— å‚å’Œæœ‰å‚ï¼š</p>
<ul>
<li><p>æ— å‚</p>
<p>ä»¥ä¸€ä¸ªç®€å•çš„alertä¸ºä¾‹ï¼Œå¯ä»¥è¿™ä¹ˆå†™ã€hrefã€‘ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'javascript: dosomething();'</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line">    function dosomething()&#123;</div><div class="line">        alert("hello, world!");</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä»£ç è¿˜å¯ä»¥è¿™ä¹ˆå†™ã€onclickã€‘ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'#'</span> <span class="attr">onclick</span>=<span class="string">"javascript: dosomething()"</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line">    function dosomething()&#123;</div><div class="line">        alert("hello, world!");</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>æˆ–è€…è¿™æ ·ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'#'</span> <span class="attr">onclick</span>=<span class="string">"dosomething()"</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></div><div class="line">    function dosomething()&#123;</div><div class="line">        alert("hello, world!");</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è¿™æ ·ä¹Ÿè¡Œï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'#'</span> <span class="attr">onclick</span>=<span class="string">"javascript: while (true) &#123; alert("</span><span class="attr">hello</span>, <span class="attr">world</span>!"); <span class="attr">break</span> <span class="attr">javascript</span>; &#125;"&gt;</span>click me<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ä¹Ÿå¯ä»¥è¿™æ ·ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'#'</span> <span class="attr">onclick</span>=<span class="string">"foo: while (true) &#123; alert("</span><span class="attr">hello</span>, <span class="attr">world</span>!"); <span class="attr">break</span> <span class="attr">foo</span>; &#125;"&gt;</span>click me<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è¿˜èƒ½è¿™æ ·ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'#'</span> <span class="attr">onclick</span>=<span class="string">"foo: while (true) &#123; alert("</span><span class="attr">hello</span>, <span class="attr">world</span>!"); <span class="attr">break</span> <span class="attr">foo</span>; &#125;"&gt;</span>click me<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<p>ä½¿ç”¨onclickæ—¶ï¼Œtagä¹Ÿå¯ä»¥æ˜¯spanï¼Œbuttonç­‰ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">onclick</span>=<span class="string">"foo: while (true) &#123; alert("</span><span class="attr">hello</span>, <span class="attr">world</span>!"); <span class="attr">break</span> <span class="attr">foo</span>; &#125;"&gt;</span>click me<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div></pre></td></tr></table></figure>
<p>è¿™é‡Œæä¸€ä¸‹ï¼Œåœ¨æœç´¢ç›¸å…³ç”¨æ³•çš„æ—¶å€™ï¼Œå‘ç°å¯¹äºonclickï¼Œ javascript:å…¶å®æ˜¯å¯ä»¥ä¸ç”¨æ·»åŠ çš„ï¼Œå®ƒçš„ä½œç”¨åªæ˜¯ä¸€ä¸ªlabelçš„ä½œç”¨ï¼Œè€Œä¸”åœ¨IEä¸‹ï¼Œä½¿ç”¨<code>onclick=&quot;javascript: JsFunc()&quot;</code>è¿˜ä¼šæŠ¥é”™ï¼Œå‚è§è¿™ç¯‡æ–‡ç« <a href="https://crisp.tweakblogs.net/blog/the-useless-javascript-pseudo-protocol.html" target="_blank" rel="external">The useless javascript: pseudo-protocol</a>ã€‚</p>
<p>æ­¤å¤–ï¼Œé€›stack overflowæ—¶ï¼Œè¿˜äººæåˆ°onclickè¿™ç§è°ƒç”¨JSçš„æ–¹å¼â€is a bad practiceâ€.</p>
<p>å‚è§<a href="https://stackoverflow.com/questions/134845/which-href-value-should-i-use-for-javascript-links-or-javascriptvoid0" target="_blank" rel="external">Which â€œhrefâ€ value should I use for JavaScript links, â€œ#â€ or â€œjavascript:void(0)â€?</a></p>
<p><img src="https://ws4.sinaimg.cn/large/006tNc79ly1fouoief80vj30j9060gn2.jpg" alt=""></p>
<p>æœ‰ä¸€ç§åˆšåˆšæŒ–åˆ°å®ï¼Œç„¶ååˆ«äººå‘ŠçŸ¥ä½ è¿™æ˜¯ä¸€å †åºŸé“çš„èµ¶è„šâ€¦â€¦</p>
</li>
<li><p>æœ‰å‚</p>
<p>æœ‰å‚å’Œæ— å‚çš„å‡½æ•°è°ƒç”¨åŸºæœ¬ä¸€æ ·ï¼Œåªæ˜¯å¤šäº†å‚æ•°ã€‚</p>
<p>çœ‹ä¾‹å­æ–¹ä¾¿ç†è§£ ï¼Œæ¯”å¦‚ä¼ é€’äº†ä¸€ä¸ªuserçš„name[rails]ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;a href='javascript: dosomething('&lt;%= @user.name %&gt;');'&gt;click me&lt;/a&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">    function dosomething(username)&#123;</div><div class="line">        alert("hello, " + username );</div><div class="line">    &#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>onclickçš„æ–¹å¼æ¥è°ƒç”¨ä¹Ÿä¸€æ ·ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;a href='#' onclick='dosomething('&lt;%= @user.name %&gt;');'&gt;click me&lt;/a&gt;</div><div class="line"></div><div class="line">&lt;script&gt;</div><div class="line">    function dosomething(username)&#123;</div><div class="line">        alert("hello, " + username );</div><div class="line">    &#125;</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>ä¸€ç‚¹æ„Ÿæƒ³ï¼š</p>
<p>æˆ‘è§‰å¾—è¿™ç§è°ƒç”¨JSçš„æ–¹å¼ï¼Œæœ€å¥½çš„åœ°æ–¹æ˜¯ä¼ é€’å‚æ•°ï¼Œå½“ä½ ç”¨Ajaxåªæ˜¯ä¸ºäº†å°†å‚æ•°ä¼ é€’ç»™JSæ—¶ï¼Œè¿™çœŸçš„æ˜¯å¾ˆæ–¹ä¾¿çš„ä¸€ç§è§£å†³æ–¹æ³•ã€‚æˆ‘ä¹‹å‰è‹¦æ¼æ€ä¹ˆä¼ é€’å‚æ•°ç»™JSï¼ŒAjaxæ˜¯ç”¨æ¥åœ¨ä¸åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹ï¼Œæ›´æ–°é¡µé¢çš„æŸä¸€éƒ¨åˆ†ï¼Œä½†å®ƒä¹Ÿå¯ä»¥ç”¨æ¥ä¼ é€’å‚æ•°ï¼Œé€šè¿‡ç”¨Ajaxï¼Œå¥½æ¯”ç»•äº†ä¸ªå¼¯ï¼Œå»é€›äº†ä¸€è¶Ÿcontrollerï¼Œåœ¨controlleré‡Œé¢æŠŠé‚£äº›éœ€è¦çš„å‚æ•°éƒ½æ•´å‡ºæ¥ï¼Œå†å°†å®ƒä»¬å›ä¼ ç»™åˆ° js.erbæ–‡ä»¶ï¼Œåœ¨js.erbä¸­å†™JSæ¥å®ç°éœ€æ±‚ã€‚äº‹ååæ€ä¸ºä»€ä¹ˆæˆ‘ç¬¬ä¸€æ—¶é—´æƒ³åˆ°Ajaxè€Œä¸æ˜¯href æˆ– onclickçš„æ–¹å¼ï¼Œå› ä¸ºæˆ‘æ ¹æœ¬ä¸çŸ¥é“è¿™ç§ç”¨æ³•ã€æ€ªè‡ªå·±å¤ªå°ç™½ã€‘ï¼Œè€ŒAjaxæ˜¯æˆ‘ç”¨è¿‡çš„ï¼Œç†Ÿæ‚‰çš„ï¼Œç»§è€Œæƒ³åˆ°äººä»¬åœ¨å¤„ç†é—®é¢˜çš„æ—¶å€™ï¼Œæ€»æ˜¯åå‘äºç”¨ä»¥å¾€çš„ç»éªŒå»è§£å†³ï¼Œé‚£äº›è¿‡å¾€çš„ç»éªŒå°±å¥½æ¯”ä½ çš„å·¥å…·ï¼Œå½“ä½ çš„å·¥å…·åº“å¾ˆå°çš„æ—¶å€™ï¼Œè¿™æ ·åšçš„å¼Šç«¯å°±æ˜¯é¿å¼€äº†å¯»æ‰¾æ›´å¥½çš„æ–¹æ³•å»æ›´é«˜æ•ˆåœ°è§£å†³é—®é¢˜çš„æœºä¼šï¼ŒåŒæ—¶ä¹Ÿæ„å‘³ç€ä½ å¤±å»äº†æ‰©å……å·¥å…·åº“çš„æœºä¼šã€‚</p>
</li>
</ul>
<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="https://crisp.tweakblogs.net/blog/the-useless-javascript-pseudo-protocol.html" target="_blank" rel="external">The useless javascript: pseudo-protocol</a></p>
<p><a href="https://stackoverflow.com/questions/1070760/javascript-function-in-href-vs-onclick/11348403#11348403" target="_blank" rel="external">JavaScript function in href vs. onclick</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://lupeipei.github.io/2018/02/24/using-layer-on-Rails/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lucia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/02/24/using-layer-on-Rails/" itemprop="url">
                  Railsä¸­ä½¿ç”¨layerå¼¹çª—ç»„ä»¶
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-02-24T21:15:25+08:00">
                2018-02-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ROR/" itemprop="url" rel="index">
                    <span itemprop="name">ROR</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/02/24/using-layer-on-Rails/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/02/24/using-layer-on-Rails/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="layeræ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#layeræ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="layeræ˜¯ä»€ä¹ˆï¼Ÿ"></a>layeræ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>layer, ä¸€æ¬¾ webå¼¹çª—ç»„ä»¶ï¼Œä½ å¯ä»¥å°†å®ƒçœ‹ä½œbootstrapä¸­çš„modalï¼Œ è¯¦æƒ…å¯è§ï¼š<a href="http://layer.layui.com/" target="_blank" rel="external">å®˜ç½‘</a>,  <a href="https://github.com/sentsin/layer" target="_blank" rel="external">GitHub</a>ã€‚</p>
<p>layeræ˜¯layuiçš„ä¸€ä¸ªå†…ç½®æ¨¡å—ï¼Œè€Œlayuiåˆ™æ˜¯ä¸€ä¸ªå‰ç«¯UIæ¡†æ¶ï¼Œå…·ä½“å¯è§å…¶<a href="http://www.layui.com/" target="_blank" rel="external">å®˜ç½‘</a>ã€‚</p>
<h4 id="æ€ä¹ˆç”¨ï¼Ÿ"><a href="#æ€ä¹ˆç”¨ï¼Ÿ" class="headerlink" title="æ€ä¹ˆç”¨ï¼Ÿ"></a>æ€ä¹ˆç”¨ï¼Ÿ</h4><p>ç”±äºlayeræ˜¯layuiçš„å¼¹çª—ç»„ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶æ—¢å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡layuiæ¨¡å—åŒ–ä½¿ç”¨ï¼Œè¿™é‡Œå•ç‹¬ä½¿ç”¨layerã€‚</p>
<p>layerçš„å•ç‹¬ä½¿ç”¨åœ¨å…¶<a href="http://layer.layui.com/hello.html" target="_blank" rel="external">å¿«é€Ÿä¸Šæ‰‹</a>é‡Œé¢æœ‰ç›¸å…³è¯´æ˜ï¼Œè¿™é‡Œè®°å½•ä¸‹å¦‚ä½•åœ¨Railsä¸­ä½¿ç”¨layerã€‚</p>
<ul>
<li><p>ä¸‹è½½layeræ–‡ä»¶åŒ…</p>
<p>layer<a href="http://layer.layui.com/" target="_blank" rel="external">å®˜ç½‘é¦–é¡µ</a>ï¼Œç‚¹å‡»<strong>ç»¿è‰²ä¸‹è½½layer</strong>ï¼Œæˆ–è€…å»<a href="https://github.com/sentsin/layer" target="_blank" rel="external">GitHub</a>ä¸Šä¸‹è½½ï¼Œä¸‹è½½åè§£å‹ã€‚</p>
<p>ç›®å‰çš„ç‰ˆæœ¬æ˜¯3.1.1ï¼š</p>
<p><img src="https://ws4.sinaimg.cn/large/006tNc79gy1forbutw4b2j30uf03574z.jpg" alt=""></p>
</li>
<li><p>å°†æ–‡ä»¶æ”¾å…¥é¡¹ç›®çš„publicç›®å½•ä¸‹</p>
<p>å°†è§£å‹åçš„layeræ–‡ä»¶åŒ…ï¼Œæ”¾å…¥é¡¹ç›®çš„publicç›®å½•ä¸‹</p>
<p><img src="https://ws2.sinaimg.cn/large/006tNc79gy1forbxearurj308g03nmx4.jpg" alt=""></p>
<p>â€‹</p>
</li>
<li><p>ä½¿ç”¨</p>
<p>å¼•å…¥layerå‰ï¼Œéœ€è¦å¼•å…¥jQueryï¼Œ é‰´äºrailsé»˜è®¤å¼•å…¥äº†jQueryï¼Œè¿™é‡Œç›´æ¥å¼•å…¥layerå³å¯ã€‚</p>
<p>åœ¨éœ€è¦ä½¿ç”¨å¼¹çª—çš„é¡µé¢å¯¹åº”çš„layoutä¸­ï¼Œæ¯”å¦‚<code>application.html.erb</code>ï¼Œæ·»åŠ ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">......</div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">......</div><div class="line"><span class="tag">&lt;<span class="name">%=</span> <span class="attr">javascript_include_tag</span> '<span class="attr">application</span>' %&gt;</span></div><div class="line">+ <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/layer/layer.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div></pre></td></tr></table></figure>
<p><strong>è¯·åŠ¡å¿…å°†<code>&lt;script src=&quot;/layer/layer.js&quot;&gt;&lt;/script&gt;</code>ç½®äº<code>&lt;%= javascript_include_tag &#39;application&#39; %&gt;</code>ä¹‹åã€‚</strong></p>
<p>æµ‹è¯•ä¸€ä¸‹æ˜¯å¦å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚åœ¨ä»»ä½•ä¸€ä¸ªé¡µé¢æœ€åï¼Œæ¯”å¦‚landing pageç€é™†é¡µï¼Œæ·»åŠ ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">......</div><div class="line">&lt;div id="for_test" class="btn btn-lg btn-danger"&gt;test&lt;/div&gt;</div><div class="line">&lt;script&gt;</div><div class="line">  $('#for_test').on('click', function()&#123;</div><div class="line">      layer.msg('hello world');</div><div class="line">  &#125;);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<p>æ­¤æ—¶ç‚¹å‡»è¯¥é¡µé¢çš„testæŒ‰é’®ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªå«æœ‰â€œhello worldâ€çš„å¼¹çª—ï¼Œè¯´æ˜å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚</p>
<p>å®ƒçš„å¼¹çª—ä½¿ç”¨æœ‰å¤šç§ï¼Œå¯ä»¥åœ¨<a href="http://layer.layui.com/" target="_blank" rel="external">å®˜ç½‘é¦–é¡µ</a>ç©ä¸€ä¸‹ï¼Œè¿˜æ˜¯è›®é…·çš„ï¼Œæ­¤å¤–ï¼Œæ–‡æ¡£å†™çš„ä¹Ÿè›®æœ‰è¶£çš„ï¼Œå¯ä»¥è¯»è¯»ã€‚</p>
<p>å¦ï¼šå¦‚æœä½ ä½¿ç”¨layer.photos(options) - ç›¸å†Œå±‚æ—¶ï¼Œä½¿ç”¨äº†JSONä¼ å…¥çš„æ–¹å¼ã€layerçš„photosæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼šJSONä¼ å…¥å’Œç›´æ¥è¯»å–é¡µé¢å›¾ç‰‡ã€‘ï¼Œä¸æƒ³è‚‰çœ¼æ£€æŸ¥è‡ªå·±çš„JSONæ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼Œæ¨èä½¿ç”¨è¿™ä¸ªåœ¨çº¿jsonè§£æå’Œæ ¼å¼éªŒè¯çš„ç½‘ç«™ï¼š <a href="https://www.json.cn/" target="_blank" rel="external">JSON.cn</a>ã€‚</p>
</li>
</ul>
<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="http://layer.layui.com/" target="_blank" rel="external">layerå®˜ç½‘</a></p>
<p><a href="http://www.layui.com/doc/modules/layer.html" target="_blank" rel="external">å¼¹å‡ºå±‚ layer</a></p>
<p><a href="http://fly.layui.com/" target="_blank" rel="external">FLY ç¤¾åŒº</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://lupeipei.github.io/2018/02/17/why-I-choose-to-be-a-programmer/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lucia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/02/17/why-I-choose-to-be-a-programmer/" itemprop="url">
                  ä¸ºä»€ä¹ˆè¦ç¼–ç¨‹ï¼Ÿ
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-02-17T06:19:30+08:00">
                2018-02-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ç¢è¯­æˆç¯‡/" itemprop="url" rel="index">
                    <span itemprop="name">ç¢è¯­æˆç¯‡</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="å¼•å­"><a href="#å¼•å­" class="headerlink" title="å¼•å­"></a>å¼•å­</h4><p>æ•´ç†æ–‡æ¡£çš„æ—¶å€™ï¼Œç¿»åˆ°äº†17å¹´å¹´æœ«å†™çš„ä¸€ç¯‡å°å¤ç›˜ï¼Œå†³å®šè´´ä¸Šï¼Œä»–æ—¥è‹¥æœ‰æ‚”æ„ï¼Œå¯åšæ‰“è„¸å‡­è¯ã€‚</p>
<h4 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h4><p>è¿™ä¸€ç¯‡å†™ç»™è‡ªå·±ã€‚</p>
<p>å…³äºä¸ºä»€ä¹ˆæˆ‘è¦ç¼–ç¨‹ã€‚</p>
<p>è®°å¾—å‡ å¹´å‰æœ‰ç¯‡å¾ˆç«çš„æ–‡ç« ï¼Œwhy everyone should learn programming? å‘¼åç€äººäººéƒ½åº”è¯¥å­¦ä¸€ç‚¹ç¼–ç¨‹æŠ€èƒ½ã€‚</p>
<p>ç¼–ç¨‹å°†ä¼šåœ¨ä¸ä¹…çš„æœªæ¥æˆä¸ºä¸€ä¸ªå¿…å¤‡æŠ€èƒ½ã€‚</p>
<p>æ‰€ä»¥ä½ å¿…é¡»å­¦ä¹ ç¼–ç¨‹ã€‚</p>
<p>å¯è¿™æ˜¯åˆ«äººçš„ç‰ˆæœ¬ï¼Œä¸æ˜¯æˆ‘çš„ç‰ˆæœ¬ã€‚</p>
<p>æˆ‘ä¸ºä»€ä¹ˆè¦å­¦ï¼Ÿ</p>
<p>ä¹Ÿè®¸æ˜¯å¤§å­¦å››å¹´é‚£å°‘æœ‰çš„å‡ æ¬¡ç†¬å¤œcodingï¼Ÿæˆ‘æ—©å·²ä¸è®°å¾—å½“æ—¶æ•²çš„å…·ä½“æ˜¯ä»€ä¹ˆäº†ï¼Œåªè®°å¾—å®¿èˆçš„ç¯å·²ç»ç†„äº†ï¼Œå®¤å‹ä»¬å·²ç»ç¡äº†ï¼Œå®‰é™å¾—åªå¬åˆ°é”®ç›˜çš„æ•²å‡»å£°ï¼Œè€Œæˆ‘ç›¯ç€ç”µè„‘å±å¹•ï¼Œçœ‹åˆ°é‚£ä¸ªC++ç¨‹åºè¿è¡ŒæˆåŠŸï¼Œé‚£ä¸€åˆ»ï¼Œæ»¡æ»¡çš„å¿«ä¹ä¸çŸ¥è¶³ã€‚</p>
<p>ä¹Ÿè®¸æ˜¯åœ¨æˆ‘è„‘æŠ½åœ°æŠ¥äº†C#é€‰ä¿®è¯¾ï¼Ÿè®°å¾—ç¬¬ä¸€å¤©å»ä¸Šè¯¾ï¼Œè€å¸ˆç‚¹åçš„æ—¶å€™ï¼Œæˆ‘æ‰å‘ç°æˆ‘æ˜¯å”¯ä¸€ä¸€ä¸ªå¤–ç­çš„å­¦ç”Ÿï¼Œå…¶ä»–åŒå­¦éƒ½æ˜¯è®¡ç®—æœºä¸“ä¸šçš„ï¼Œä½†æ˜¯è¿™å¹¶ä¸å¦¨ç¢æˆ‘å»è·Ÿç€çå€’è…¾ã€‚è™½ç„¶é‚£ä¸ªå­¦æœŸè¯¾å ‚ä¸Šçš„å¾ˆå¤šçŸ¥è¯†ç‚¹æˆ‘æ—©å·²å¿˜äº†ï¼Œä½†è¿™ä¸€æ®µç‰¹åˆ«çš„å­¦ä¹ ç»å†å´åœ¨è®°å¿†ä¸­ç•™ä¸‹äº†ç—•è¿¹ã€‚</p>
<p>ä¹Ÿè®¸æ˜¯å¤§ä¸‰æ—¶é‚£æ¬¡MatlabæœŸæœ«è€ƒï¼Ÿæˆ‘è¿˜è®°å¾—æœ‰ä¸€é¢˜ä½œå›¾å¤§é¢˜ï¼Œé‚£é¢˜è€å¸ˆæ›¾åœ¨å®éªŒå®¤è§£è¿‡ï¼Œä»£ç å¾ˆé•¿ã€‚è¯¾åæˆ‘ç”¨äº†ä¸¤ä¸ªforå¾ªç¯ï¼Œè¿è¡Œç»“æœæ— è¯¯ï¼Œä½†æ˜¯æ•´ä¸ªä»£ç å—ç®€åŒ–äº†å¾ˆå¤šï¼Œçœ‹ç€ç‰¹åˆ«æ¸…çˆ½ï¼Œæ‰€ä»¥è€ƒè¯•æ—¶ï¼Œæˆ‘ç»§ç»­ç…§ç€è‡ªå·±çš„æƒ³æ³•æ¥ï¼Œåé¢ç«Ÿç„¶æ‹¿åˆ°äº†æ»¡åˆ†ã€‚ç°åœ¨æƒ³æ¥ï¼Œé‚£æ—¶å€™æˆ‘åšçš„åº”è¯¥ç®—æ˜¯refactoringã€‚</p>
<p>ä¹”å¸®ä¸»æ›¾è¯´â€œ  You canâ€™t connect the dots looking forward; you can only connect them looking backwards. So you have to trust that the dots will somehow connect in your future. â€</p>
<p>ä¹Ÿè®¸è¿™äº›ä¾¿æ˜¯åæ¥é‚£äº›äº‹æƒ…å‘ç”Ÿçš„å¼•å­ã€‚</p>
<p>æ¯•ä¸šåï¼Œ æˆ‘åšçš„æ˜¯å¸‚è°ƒæ•°æ®åˆ†æçš„å·¥ä½œï¼Œèƒ½è·Ÿcodingæ­ä¸Šè¾¹çš„å°±æ˜¯è®¾è®¡ç½‘ç»œé—®å·ï¼Œå¯ä»¥ç©ç©JSç‰¹æ•ˆï¼Œé‚£æ—¶å€™å•¥ä¹Ÿä¸æ‡‚ï¼Œåªæ˜¯å•çº¯å–œæ¬¢çœ‹é‚£äº›è‹±æ–‡docsï¼Œè·Ÿç€æ–‡æ¡£å®ä½œï¼Œå‡ºç°é¢„æœŸæ•ˆæœä¾¿ä¼šæ¬¢å–œï¼Œæ›´å¤šçš„æ˜¯å›¾ä¸ªä¹ã€‚</p>
<p>14å¹´ï¼Œåˆ©ç”¨ä¸‹ç­æ—¶é—´å’Œå‘¨æœ«ï¼Œä¸€ä¸ªæœˆæŠŠVBAå­¦äº†ä¸ªå¤§æ¦‚ï¼Œç„¶åå°±å¼€å§‹è‡ªé¡¾è‡ªåœ°ç©èµ·æ¥ï¼ŒæŠŠå·¥ä½œä¸­é‡åˆ°çš„é‡å¤åŠ³åŠ¨ç®€åŒ–ï¼Œè‡ªåŠ¨åŒ–æŠ¥è¡¨ï¼Œåç»­è¢«è€å¤§å‘ç°æˆ‘ç«Ÿç„¶è¿˜æœ‰è¿™æŠ€èƒ½ï¼Œç´¢æ€§ç»™æˆ‘å®‰æ’codingçš„å·¥ä½œï¼Œç„¶åå°±æ˜¯åšäº›å°æ’ä»¶ï¼Œè®¤è¯†äº†visual studioã€‚</p>
<p>16å¹´ï¼Œçœ‹äº†Linus Torvaldsçš„é‚£æœ¬ã€ŠJust for funã€‹ï¼Œç„¶åå¿ƒé‡Œç—’ç—’åœ°æƒ³ç€è¦ç©ä¸€æ¬¡Linuxç³»ç»Ÿï¼Œç»™Macè£…è™šæ‹Ÿæœºï¼Œå€’è…¾Ubuntuï¼Œåœ¨Edxä¸Šåˆ·ã€ŠIntro to Linuxã€‹ï¼Œçœ‹ã€ŠLinux command lineã€‹, æ³¨å†Œcloud9ï¼Œ æˆ‘è¿˜è®°å¾—7æœˆçš„æ—¶å€™ï¼Œcloud9è¢«Amazonæ”¶è´­äº†ï¼Œcloud9çš„CEOå†™äº†å°ä¿¡ï¼Œç»“å°¾å¤„happy codingï¼Œè«åè§‰å¾—æ¿€åŠ¨ã€‚</p>
<p>åˆ·äº†ç‚¹Linuxï¼ŒåŠæ‡‚ä¸æ‡‚ï¼Œä½†ä¹Ÿè§‰å¾—æ²¡ä»€ä¹ˆï¼Œjust for funï¼Œå½“ç„¶ä¹Ÿæ²¡é—²ç€ï¼Œçé€›è¿‡å¤šä¸ªå­¦ä¹ å¹³å°ï¼Œåˆ·äº†Edxçš„ã€ŠIntroduction to Computer Science and Programming Using Pythonã€‹ï¼Œåœ¨Udacityåˆ·äº†ã€ŠIntroduction to java programmingã€‹ï¼Œå®‰è£…BlueJå„ç§ç©â€¦â€¦</p>
<p>è¿™ä¹ˆçå€’è…¾çš„ç»“æœæ˜¯ï¼Œæˆ‘æŠŠbashprofileç©åäº†ï¼Œåæ¥ä¸å¾—ä¸æ‹¿ç€Macåˆ°åº—é‡Œé‡è£…ç³»ç»Ÿã€‚</p>
<p>è€Œå¯¹äºRORï¼Œæœ€å¼€å§‹çš„æ¥è§¦æ˜¯çœ‹äº†Michael Hartlçš„learn enough to be dangerous ç³»åˆ—ï¼Œåæ¥åœ¨Amazonä¸Šä¹°äº†æœ¬åŸç‰ˆçš„ã€ŠEloquent Rubyã€‹ï¼Œè¿™åº”è¯¥æ˜¯æˆ‘äºŒåå¤šå¹´æ¥ä¹°çš„æœ€è´µçš„ä¸€æœ¬ä¹¦ã€‚ä¸è¿‡é‚£æ—¶å€™æ›´å¤šçš„æ˜¯å°æ‰“å°é—¹ï¼Œå®Œå…¨é‡è·¯å­ï¼Œæ²¡æœ‰ä»»ä½•ç›®æ ‡æ€§åœ°è‡ªå­¦ï¼Œå¤šæµ…å°è¾„æ­¢ï¼Œåæ¥æœºç¼˜å·§åˆï¼Œçœ‹åˆ°äº†Fullstackçº¿ä¸ŠåŸ¹è®­ï¼ŒæŠ¥åï¼Œéšåä¾¿æ˜¯å‡ ä¸ªæœˆçš„æŠ•å…¥ï¼Œç¬¬ä¸€æ¬¡åœ¨æœºåœºå€™æœºæ—¶æ•²ä»£ç ï¼Œç¬¬ä¸€æ¬¡å‚åŠ meetupï¼Œç¬¬ä¸€æ¬¡ç”¨hexo+githubæ­å»ºäº†è‡ªå·±çš„ä¸ªäººç½‘ç«™ï¼Œç¬¬ä¸€æ¬¡ä¸äººåä½œå¹¶æˆåŠŸéƒ¨ç½²äº†ä¸€ä¸ªä¹å™¨å”®å–å¹³å°ï¼Œç¬¬ä¸€æ¬¡æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•åšäº†ä¸ªçº¿ä¸‹meetupçš„å¬é›†ä»¤ï¼Œç¬¬ä¸€æ¬¡ç§Ÿé˜¿é‡Œäº‘ï¼Œä¹°åŸŸåï¼Œä¹°SSLå‡­è¯ï¼Œç¬¬ä¸€æ¬¡å¼€å§‹ä»¥ç¼–ç¨‹è°‹ç”Ÿâ€¦â€¦</p>
<p>å¤ªå¤šçš„ç¬¬ä¸€æ¬¡ã€‚</p>
<p>å½“å¹´é‚£ä¸ªä¸å°å¿ƒç¥äº†ä¸€çœ¼C++çš„å¤§äºŒå¥³å­©ï¼Œä¸€å®šä¸ä¼šæƒ³åˆ°å¤šå¹´åå¥¹ä¼šæˆä¸ºä¸€åç¨‹åºå‘˜ã€‚</p>
<p>Welcome to the new worldã€‚</p>
<p>è¿™ä¸ªæ–°ä¸–ç•Œå¾ˆå¤§ï¼Œè·¯å¾ˆé•¿ï¼Œæ‰€ä»¥å‘¢ï¼Ÿ</p>
<p>å¯ä»¥çœ‹å¾ˆå¤šå¾ˆå¤šçš„é£æ™¯ã€‚</p>
<p>ä¹Ÿä¸æ˜¯æ²¡æœ‰é¡¾å¿Œã€‚</p>
<p>è¿™æ˜¯ä¸ªæ–°ä¸œè¥¿å±‚å‡ºä¸ç©·çš„æ—¶ä»£ï¼Œç‰¹åˆ«æ˜¯æŠ€æœ¯é¢†åŸŸï¼Œå¾ˆå¤šæˆ‘ä»¬ä»Šå¤©ä¹ ä»¥ä¸ºå¸¸çš„æŠ€æœ¯ï¼Œä¸ä¹…å¯èƒ½å°±ä¼šè¢«ä¸¢å¼ƒã€‚</p>
<p>ä½†é‚£åˆå¦‚ä½•ï¼Ÿè¿›æ­¥ä¸å°±æ˜¯æ¨é™ˆå‡ºæ–°ï¼Ÿç§‘æŠ€åœ¨è¿›æ­¥çš„åŒæ—¶ï¼Œäººä¹Ÿåœ¨è¿›æ­¥ã€‚</p>
<p>æ‹¥æŠ±å˜åŒ–ï¼ŒåŠªåŠ›æˆä¸ºå…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>Enjoyã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://lupeipei.github.io/2018/02/12/static-files-are-not-loaded-properly-when-depolyed-with-nginx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lucia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/02/12/static-files-are-not-loaded-properly-when-depolyed-with-nginx/" itemprop="url">
                  Railséƒ¨ç½²åˆ°Nginxåé™æ€æ–‡ä»¶åŠ è½½ä¸æ­£å¸¸
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-02-12T09:24:41+08:00">
                2018-02-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/ROR/" itemprop="url" rel="index">
                    <span itemprop="name">ROR</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/02/12/static-files-are-not-loaded-properly-when-depolyed-with-nginx/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/02/12/static-files-are-not-loaded-properly-when-depolyed-with-nginx/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h4><p>é‰´äºæˆ‘éƒ¨ç½²è¿™å—è¸©çš„å‘ä¸å°‘ï¼Œè¿‘æ¥ä¸€ä½å°ä¼™ä¼´åœ¨éƒ¨ç½²Railsçš„æ—¶å€™ï¼Œå°±å¸®å¿™debugäº†ä¸‹ï¼Œä¸­é—´é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼š<strong>ç½‘ç«™éƒ¨ç½²åˆ°Nginxåï¼Œé¡µé¢åŠ è½½ä¸æ­£å¸¸ï¼Œæ‰€æœ‰çš„æ ¼å¼éƒ½æ²¡æœ‰åŠ è½½è¿›æ¥</strong>ã€‚æœ€åGoogleåˆ°äº†è§£å†³æ–¹æ³•ï¼Œè§‰å¾—æœ‰å¿…è¦è®°å½•ä¸€ä¸‹ï¼Œä»¥å¤‡å¿˜ã€‚</p>
<h4 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h4><p>æœ¬åœ°è¿è¡Œçš„é¡µé¢æ˜¯è¿™æ ·çš„ï¼šğŸ‘‡</p>
<p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1foccuxti6uj31kw0riqdl.jpg" alt=""></p>
<p>éƒ¨ç½²åˆ°Nginxåï¼Œæµè§ˆå™¨æ‰“å¼€çš„é¡µé¢æ˜¯è¿™æ ·çš„ï¼šğŸ‘‡</p>
<p><img src="https://ws2.sinaimg.cn/large/006tKfTcgy1foccunilaij30ui0exq3o.jpg" alt=""></p>
<p>å¯ä»¥çœ‹å‡ºéƒ¨ç½²ä¸­ï¼Œæ ·å¼æ²¡æœ‰åŠ è½½è¿›æ¥ã€‚</p>
<h4 id="è§£å†³æ–¹æ³•"><a href="#è§£å†³æ–¹æ³•" class="headerlink" title="è§£å†³æ–¹æ³•"></a>è§£å†³æ–¹æ³•</h4><p>èµ·å…ˆæˆ‘ä»¥ä¸ºå¯ä»¥é€šè¿‡assets:precompileæ¥è§£å†³ï¼Œä½†å°è¯•åå‘ç°å¹¶ä¸èƒ½ã€‚</p>
<p>ç‚¹å‡»å³é”®ï¼Œçœ‹chromeçš„consoleï¼ŒæŠ¥é”™å¦‚ä¸‹ï¼š</p>
<p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1focd5l1xrnj30ex02374o.jpg" alt=""></p>
<p>æŠ¥é”™æ˜¾ç¤ºæ˜¯transferred with MIME type text/plainäº†ï¼ŒæŸ¥çœ‹MIME <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types" target="_blank" rel="external">å®˜ç½‘</a>, å¯ä»¥çœ‹åˆ°å®ƒçš„å®šä¹‰åŠåº”ç”¨ï¼š</p>
<p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1focdkrt9erj30li06w0uj.jpg" alt=""></p>
<p>çœ‹å®ƒçš„Discrete typesåˆ—è¡¨ï¼š</p>
<p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1focdpcmtmcj30ck07q3ys.jpg" alt=""></p>
<p>å®ƒçš„multipart typesï¼š</p>
<p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1focdpxd603j30d9027jrd.jpg" alt=""></p>
<p>é‰´äºæ–‡ä»¶æ²¡æœ‰è¢«æ‹†åˆ†æˆå¤šä¸ªéƒ¨åˆ†ï¼Œåº”è¯¥å±äºæ˜¯discrete typesï¼Œ å†çœ‹consoleçš„æŠ¥é”™ï¼Œæ–‡ä»¶åº”è¯¥æ˜¯é»˜è®¤ç”¨text/plainçš„æ–¹å¼å¤„ç†äº†ï¼Œçœ‹å®ƒçš„è¯­æ³•ï¼Œä½ ä¼šå‘ç°ï¼š</p>
<p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1focdue52fzj30m002qwew.jpg" alt=""></p>
<p>äºŒè¿›åˆ¶çš„docséƒ½æ˜¯ç”¨<strong>application/octet-stream</strong>çš„æ–¹å¼å¤„ç†çš„ï¼Œè²Œä¼¼æ‰¾åˆ°é’¥åŒ™äº†ã€‚å¯æ˜¯ï¼Œè¿™è¦åœ¨å“ªé‡Œä¿®æ”¹å‘¢ï¼Ÿæˆ‘è¿˜æ˜¯ä¸€å¤´é›¾æ°´ã€‚</p>
<p>Googleåï¼Œåœ¨è¿™ä¸€ç¯‡<a href="http://blog.csdn.net/m0_37904728/article/details/78745243" target="_blank" rel="external"> Webéƒ¨ç½²åˆ°Nginxåé™æ€æ–‡ä»¶åŠ è½½ä¸æ­£å¸¸</a>é‡Œæ‰¾åˆ°äº†è§£ç­”ï¼Œä¸åºŸè¯äº†ï¼Œç›´æ¥ä¸Šè§£ç­”ï¼š</p>
<p>ç¼–è¾‘<code>/etc/nginx/nginx.conf</code>æ–‡ä»¶ï¼Œåœ¨http{}ä¸­ï¼Œæ·»åŠ ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">include</span> /etc/nginx/mime.types;</div><div class="line"><span class="attribute">default_type</span> application/octet-stream;</div></pre></td></tr></table></figure>
<p>ç„¶åå†é‡å¯Nginxï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo service nginx restart</div></pre></td></tr></table></figure>
<p>å†æ¬¡åˆ·æ–°ç½‘ç«™ï¼ŒOKã€‚</p>
<p>å¦ï¼Œå…¶å®æˆ‘ä¹Ÿä¸å¤§æ‡‚MIMEï¼Œçœ‹å®šä¹‰çŸ¥é“æ˜¯ä¸€ç§å¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•çš„è§„èŒƒï¼Œå¦‚æœä½ å¥½å¥‡çš„è¯ï¼Œæ‰“å¼€ä½ çš„ä»»æ„ä¸€å°emailï¼Œé€‰æ‹©<strong>æŸ¥çœ‹åŸå§‹é‚®ä»¶</strong>ï¼Œä¼šå‘ç°MIMEçš„å½±å­ï¼Œæœ‰åŠ©åŠ æ·±ç†è§£ã€‚æ¯”å¦‚æˆ‘gmailä¸­çš„ä¸€ä»½é‚®ä»¶ï¼š</p>
<p><img src="https://ws3.sinaimg.cn/large/006tKfTcgy1foceevsozwj30pd01wwex.jpg" alt=""></p>
<h4 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h4><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types" target="_blank" rel="external">MIME types</a></p>
<p><a href="http://blog.csdn.net/m0_37904728/article/details/78745243" target="_blank" rel="external"> Webéƒ¨ç½²åˆ°Nginxåé™æ€æ–‡ä»¶åŠ è½½ä¸æ­£å¸¸</a></p>
<p>BTW,  Googleçš„æ—¶å€™ï¼Œå‘ç°äº†é˜®ä¸€å³°è€å¸ˆçš„è¿™ç¯‡<a href="http://www.ruanyifeng.com/blog/2008/06/mime.html" target="_blank" rel="external">MIMEç¬”è®°</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://lupeipei.github.io/2018/02/10/notes-of-waiting-for-godot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Lucia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lucia">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2018/02/10/notes-of-waiting-for-godot/" itemprop="url">
                  è¯»ã€Šç­‰å¾…æˆˆå¤šã€‹
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-02-10T09:39:33+08:00">
                2018-02-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/è¯»ä¹¦ç¬”è®°/" itemprop="url" rel="index">
                    <span itemprop="name">è¯»ä¹¦ç¬”è®°</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>è¯»çš„æ˜¯æ–½å’¸è£ç¿»è¯‘çš„ç‰ˆæœ¬ï¼Œæ„Ÿè§‰è¯‘å¾—å¸¦ç‚¹äº¬ç‰‡çš„å‘³å„¿ï¼Œ è®©æˆ‘æƒ³èµ·è€èˆã€ŠèŒ¶é¦†ã€‹ä¸­äººç‰©çš„å¯¹ç™½ã€‚</p>
<p>å‰§æœ¬å¾ˆçŸ­ï¼Œä¸¤å¹•ï¼Œå‡ºåœºäº”äººï¼šæˆˆæˆˆï¼Œç‹„ç‹„ï¼Œå¹¸è¿å„¿ï¼Œæ³¢å“ï¼Œé€å£ä¿¡çš„å°å­©ã€‚æƒ…èŠ‚ä¹Ÿå¾ˆç®€å•ï¼Œé»„æ˜æ—¶åˆ†ï¼Œæˆˆæˆˆå’Œç‹„ç‹„è¿™ä¸¤ä¸ªæµæµªæ±‰åœ¨ä¸€æ£µæ ‘ä¸‹ç­‰å¾…æˆˆå¤šï¼Œä¸­é—´ä»–ä»¬è¿˜å•†é‡ç€é€šè¿‡ä¸ŠåŠæ¥æ‰“å‘æ¼«é•¿çš„ç­‰å¾…ï¼Œåæ¥é‡åˆ°äº†æ³¢å“å’Œä»–çš„å¥´éš¶å¹¸è¿å„¿ï¼Œå››äººï¼Œæˆ–è€…æ›´å‡†ç¡®åœ°è¯´æ˜¯ä¸‰äººï¼Œä¸€ç›´æœ‰ä¸€å¥æ²¡ä¸€å¥åœ°è¯´ç€è¯ï¼Œ æ²¡æœ‰ä»»ä½•é‡ç‚¹ï¼Œå¹¸è¿å„¿åªåœ¨è¢«ä»–ä»¬ä¸‰ä¸ªæ•™å”†ç€æ€è€ƒçš„æ—¶å€™ï¼Œæ‰å¼€å£åå‡ºäº†ä¸€ä¸²ä¸²è¯ï¼Œåƒæ˜¯æ— åºè¹¦å‡ºæ¥çš„å­—çœ¼ï¼Œä¸­é—´æ³¢å“è¿˜ä¼ªæ–‡è‰ºäº†ä¸€æŠŠï¼Œç„¶åæ³¢å“å¸¦ç€å¹¸è¿å„¿ç¦»å¼€ï¼Œæœ€åå°å­©è¿‡æ¥å‘Šè¯‰ä¸¤ä¸ªæµæµªæ±‰ï¼Œæˆˆå¤šä»Šå¤©ä¸ä¼šæ¥äº†ï¼Œæ˜å¤©å†æ¥ï¼Œä¸¤ä¸ªæµæµªæ±‰ä¹Ÿå„è‡ªå›å»äº†ï¼Œè¿™æ˜¯ç¬¬ä¸€å¹•ã€‚åä¸€å¹•ï¼Œäººç‰©ä¸å˜ï¼Œåªæ˜¯æ³¢å“çäº†ï¼Œå¹¸è¿å„¿å“‘äº†ï¼Œä»–ä»¬æ‘”å€’äº†ï¼Œè¢«æ‰¶èµ·ååˆç¦»å¼€äº†ï¼Œå°å­©æ¥äº†ï¼ŒåŒæ ·çš„ï¼Œå‘Šè¯‰ä»–ä»¬æˆˆå¤šä»Šå¤©ä¸ä¼šæ¥äº†ï¼Œæ˜å¤©å†æ¥ï¼Œä¸¤ä¸ªæµæµªæ±‰åˆå¼€å§‹å•†é‡ç€ä¸ŠåŠäº†ï¼Œå—¯ï¼Œæ²¡æœ‰ç»³å­ï¼Œè£¤å¸¦è¢«æ‹‰æ‰¯æ–­äº†ï¼Œå¾—ï¼Œå„è‡ªå›å§ï¼Œæ˜ä¸ªå†æ¥ã€‚</p>
<p>æ•´ä¸ªçœ‹å®Œï¼Œé™¤å¶æœ‰äº›å¥å­ä¼šè®©äººå‘ç¬‘ï¼Œæ•´ä¸ªçš„æ°›å›´è®©äººè§‰å¾—å¾ˆæ˜¯æ²‰é—·ï¼Œå°±å¦‚åŒä»–ä»¬è‡ªå·±æ‰€è¯´çš„é‚£æ ·ï¼Œæˆ‘ä»¬æ€»å¾—åšç‚¹ä»€ä¹ˆæ¥æ‰“å‘æ—¶é—´ï¼Œè‡³å°‘ä¸èƒ½é‚£ä¹ˆçš„æ— èŠï¼Ÿè„±é´å­ï¼Œè¯•é´å­ï¼Œè„±å¸½å­ï¼Œæ¢å¸½å­ï¼Œå”±æ­Œï¼Œè¹¦è·³ï¼Œåƒèåœï¼Œä¸ŠåŠï¼Œæ‘”å€’ï¼Œèµ·æ¥ï¼Œæ¥å›è¸±æ­¥â€¦â€¦</p>
<p>æ•´ä¸ªå‰§æœ¬æ— æ³•ç”¨å¸¸è§„çš„é€»è¾‘å»ç†è§£ï¼Œä¸ºä»€ä¹ˆä»…ä»…è¿‡äº†ä¸€å¤©ï¼Œæ³¢å“å°±çäº†ï¼Ÿè€Œä¸”è™šå¼±çš„ç«™ä¸èµ·æ¥éœ€è¦äººæ€æ‰¶ï¼Ÿå¹¸è¿å„¿ä¸ºä»€ä¹ˆæˆäº†å“‘å·´ï¼Ÿæ˜¨å¤©è¿˜åœ¨é‚£é‡Œè¢«å‘½ä»¤ç€æ€è€ƒè¯´è¯çš„äººï¼Œç¬¬äºŒå¤©ç«Ÿç„¶ä¸èƒ½å¼€å£äº†ï¼Œæ˜¯åœ¨æš—ç¤ºç€å”¯ä¸€ä¸€ä¸ªæ€è€ƒçš„äººéƒ½ä¸èƒ½è¡¨è¾¾ä»–çš„æ€è€ƒäº†å—ï¼Ÿæˆˆæˆˆæ€»æ˜¯é—´æ­‡æ€§å¤±å¿†ï¼Œå¯åˆå¯¹æŸäº›äº‹æƒ…è®°å¾—æ ¼å¤–æ¸…æ¥šï¼Œè¿˜æœ‰ä¸ºä»€ä¹ˆæ˜¨å¤©æ¥çš„å°å­©ç«Ÿç„¶å·²ç»ä¸è®¤è¯†ä»–ä»¬äº†ï¼Ÿå¥½å§ï¼Œè¿™æ˜¯è’è¯å‰§ã€‚</p>
<p>çœ‹å®Œä¸å¾—ä¸å»çœ‹äº†ä¸‹ä½œè€…çš„ç®€ä»‹ï¼Œçªƒä»¥ä¸ºè¿™æ ·çš„å‰§æœ¬ï¼Œåº”è¯¥å¤šåŠä¸å…¶äººç”Ÿç»å†æœ‰å…³ã€‚æœç„¶ï¼Œè´å…‹ç‰¹æœ¬äººé•¿æœŸè¿‡ç€é¢ æ²›æµç¦»çš„æµæµªå’Œé€ƒäº¡ç”Ÿæ´»ï¼Œè¿˜æ›¾æœ‰è¿‡åœ¨è¡—å¤´æ•£æ­¥æ—¶ï¼Œè¢«é™Œç”Ÿäººç”¨åˆ€åˆºç©¿è‚ºéƒ¨çš„ç»å†ï¼Œè¿™æ ·çš„é‡åˆºç»å†ä¸å¾—ä¸è¯´æ˜¯æŒºè’è¯ã€‚</p>
<p>å¤§éƒ¨åˆ†äººçœ‹å®Œè¿™æœ¬ä¹¦ï¼Œåº”è¯¥ä¼šçŒœæµ‹ä½œè€…æƒ³è¦è¡¨è¾¾çš„æ˜¯ä»€ä¹ˆï¼Œæˆˆå¤šä»£è¡¨ç€ä»€ä¹ˆå‘¢ï¼Ÿå¸Œæœ›ï¼Œå‘½è¿ï¼Œè¿˜æ˜¯ä¸€ä¸ªèƒ½æ”¹å†™ä»–ä»¬äººç”Ÿçš„å¥‘æœºï¼Ÿæ–‡ä¸­å¤šæ¬¡æåˆ°æˆˆå¤šæ¥äº†ï¼Œä»–ä»¬å°±å¾—æ•‘äº†ã€‚æˆˆå¤šæ›´å¤šçš„ç®—æ˜¯ä»–ä»¬çš„ä¸€ä¸ªå¿µæƒ³å§ï¼Œä¹Ÿè®¸ä»–ä»¬åœ¨ç­‰å¾…ç€æ”¹å˜ï¼Œæ”¹å˜è¿™æ— èŠçš„æ—¥æ—¥æ¶ˆé£ï¼Œæ‰“ç ´è¿™æ²¡äº‹å¯åšçš„çŠ¶æ€ï¼Œå¯æˆ‘åˆæš—æš—è§‰å¾—ä»–ä»¬æ—¢æ¸´æœ›æ”¹å˜åˆå®³æ€•ç€æ”¹å˜ã€‚ä»–ä»¬æ€»æ˜¯è¯´ç€è¦æ€æ ·æ€æ ·ï¼Œä½†æ˜¯ä»–ä»¬å°±æ˜¯ä¸åŠ¨ï¼Œä¸å…¶è¢«åŠ¨ç­‰å¾…ï¼Œä¸ºä»€ä¹ˆä¸ä¸»åŠ¨å‡ºå‡»å‘¢ï¼Ÿ</p>
<p>ã€Šä¸œé‚ªè¥¿æ¯’ã€‹é‡Œï¼Œå‡ ä¹èº«æ— åˆ†æ–‡çš„å­¤å¥³ï¼Œæ‰¾åˆ°æ¬§é˜³é”‹ï¼Œå¸Œæœ›å¯ä»¥é›‡åˆ°æ€æ‰‹æŠ¥ä»‡ï¼Œå›ºæ‰§çš„å¥¹æ¯æ—¥éƒ½æ¥ï¼Œä½†ä¸€ç›´æ²¡äººæ„¿æ„å¸®å¥¹ï¼Œå¥¹åœ¨ç­‰ï¼Œç­‰é‚£ä¸ªæ„¿æ„å‡ºæ‰‹çš„äººï¼Œæœ€ç»ˆå¥¹ç­‰åˆ°äº†æ´ªä¸ƒï¼Œä¹Ÿè®¸çœ‹ä¼¼æ¸ºèŒ«çš„ç­‰å¾…ä¹Ÿä¼šæœ‰æ‰€æ”¶è·ã€‚</p>
<p>â€œæ¯ä¸ªäººéƒ½ä¼šä¸ºä¸€æ ·ä¸œè¥¿åšæŒç€ï¼Œå…¶ä»–äººçœ‹ä¼šè§‰å¾—æ˜¯æµªè´¹æ—¶é—´ï¼Œä½†æ˜¯å¥¹å´è§‰å¾—å¾ˆé‡è¦ã€‚â€</p>
<p>æ¢ä¸ªè§’åº¦ï¼ŒæŠŠæˆˆæˆˆå’Œç‹„ç‹„çš„è¿™ç§ç­‰å¾…çœ‹ç€æ˜¯ä¸€ç§å‚»æ„£ä¼¼çš„åšæŒï¼Œæ„Ÿè§‰ç¾å¥½å¤šäº†ã€‚</p>
<p>å¦‚æœæˆˆå¤šçœŸçš„æ¥èµ´çº¦äº†ï¼Œè¿™ä¸¤ä¸ªæµæµªæ±‰åº”è¯¥å¾ˆå¼€å¿ƒå§ï¼Ÿæˆ–è€…è¿™äºŒä½ä¼šç¢ç£¨ç€æ‰¾ä¸ªåœ°å„¿ç‹ ç‹ åœ°æŠŠæˆˆå¤šæä¸€é¡¿ï¼Œå› ä¸ºä»–è€æ˜¯æ”¾ä»–ä»¬é¸½å­ï¼Œç„¶åå†æ•™å”†ç€è®©æˆˆå¤šå›å»ï¼Œä»–ä»¬è¦ç»§ç»­ç­‰å¾…ï¼Ÿé¢ï¼Œæœ‰ç‚¹å¤ªèƒ¡æ‰¯äº†ã€‚</p>
<p>äººç”Ÿè‹¦çŸ­ï¼Œæ„¿æ‰€ç­‰æœ‰æ‰€è·ã€‚</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Lucia" />
          <p class="site-author-name" itemprop="name">Lucia</p>
           
              <p class="site-description motion-element" itemprop="description">æ›²è‚±è€Œæ•</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">75</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">17</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">25</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/Lupeipei" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.facebook.com/Luciapeipei" target="_blank" title="Facebook">
                  
                    <i class="fa fa-fw fa-facebook"></i>
                  
                  Facebook
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lucia</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  

    
      <script id="dsq-count-scr" src="https://https-lupeipei-github-io.disqus.com/count.js" async></script>
    

    

  




	





  





  





  






  





  

  

  

  

</body>
</html>
